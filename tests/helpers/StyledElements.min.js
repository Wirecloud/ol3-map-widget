null==window.StyledElements&&(window.StyledElements={}),function(){"use strict";var a={};a.gettext=function(a){return a},a.ngettext=function(a,b,c){return 1===c?a:b},a.interpolate=function(a,b){return a.replace(/%\(\w+\)s/g,function(a){return String(b[a.slice(2,-2)])})},a.Template=function(a){this.template=a},a.Template.prototype.evaluate=function(b){return a.interpolate(this.template,b)},a.stopPropagationListener=function(a){a.stopPropagation()},a.preventDefaultListener=function(a){a.preventDefault()},a.callCallback=function(a,b){if("function"==typeof a)try{return a.apply(null,Array.prototype.slice.call(arguments,1))}catch(a){}},a.getFullscreenElement=function(){return"fullscreenElement"in document?document.fullscreenElement:"msFullscreenElement"in document?document.msFullscreenElement:"mozFullScreenElement"in document?document.mozFullScreenElement:"webkitFullscreenElement"in document?document.webkitFullscreenElement:void 0},a.onFullscreenChange=function(a,b){a instanceof StyledElements.StyledElement&&(a=a.wrapperElement),a.ownerDocument.addEventListener("fullscreenchange",b,!0),a.ownerDocument.addEventListener("msfullscreenchange",b,!0),a.ownerDocument.addEventListener("mozfullscreenchange",b,!0),a.ownerDocument.addEventListener("webkitfullscreenchange",b,!0)},a.removeFullscreenChangeCallback=function(a,b){a instanceof StyledElements.StyledElement&&(a=a.wrapperElement),a.ownerDocument.removeEventListener("fullscreenchange",b,!0),a.ownerDocument.removeEventListener("msfullscreenchange",b,!0),a.ownerDocument.removeEventListener("mozfullscreenchange",b,!0),a.ownerDocument.removeEventListener("webkitfullscreenchange",b,!0)},a.isFullscreenSupported=function(){return"fullscreenEnabled"in document?document.fullscreenEnabled:"mozFullScreenEnabled"in document?document.mozFullScreenEnabled:"webkitFullscreenEnabled"in document?document.webkitFullscreenEnabled:void 0},a.removeWord=function(a,b){return a.replace(new RegExp("(^\\s*|\\s+)"+b+"(\\s+|\\s*$)","g")," ").trim()},a.appendWord=function(b,c){return a.removeWord(b,c)+" "+c},a.prependWord=function(b,c){return c+" "+a.removeWord(b,c)},a.escapeRegExp=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};var b=document.createElement("div");a.escapeHTML=function(a){return b.textContent=a,b.innerHTML},a.getRelativePosition=function(a,b){if(a===b)return{x:0,y:0};var c=a.getBoundingClientRect(),d=b.getBoundingClientRect();return{x:c.left-d.left,y:c.top-d.top}},a.clone=function(b,c){var d,e;if(null==b||"object"!=typeof b)return b;if(d=Array.isArray(b)?[]:{},c)for(e in b)d[e]=a.clone(b[e],!0);else for(e in b)d[e]=b[e];return d},a.cloneObject=function(b){var d={};if(null==b)return d;if(!a.isPlainObject(b))throw new TypeError("[error description]");for(var e in b)d[e]=c.call(a,b[e]);return d};var c=function(b){return null==b?null:a.isPlainObject(b)?this.cloneObject(b):Array.isArray(b)?b.slice():b};a.hasFocus=function(a){return document.activeElement===a},a.updateObject=function(b,c){b=a.cloneObject(b),c=a.cloneObject(c);for(var d in c)b[d]=f.call(a,b[d],c[d]);return b},a.isPlainObject=function(a){return"object"==typeof a&&null!==a&&!(a.constructor&&!Object.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))};var d=function(a,b){var c,d,e=!1;if("function"!=typeof a||"function"!=typeof b)return e;for(c=a.prototype,d=b.prototype;!(e=c===d)&&null!==(d=Object.getPrototypeOf(d))&&(d!==Object.prototype||c===d););return e},e=function(a,b){return a.constructor===b.constructor},f=function(b,c){return null==c?null==b&&(b=null):"function"==typeof c?(null==b||d(b,c))&&(b=c):a.isPlainObject(c)?(null==b||a.isPlainObject(b))&&(b=this.updateObject(b,c)):Array.isArray(c)?(null==b&&(b=[]),Array.isArray(b)&&(b=b.concat(c))):(null==b||e(b,c))&&(b=c),b};a.inherit=function(b,c,d){b.prototype=Object.create(c.prototype),b.prototype.constructor=b,a.merge(b.prototype,d)},a.highlight=function(a,b){return a.replace(new RegExp(b,"i"),function(a){return'<strong class="text-highlighted">'+a+"</strong>"})},a.capitalize=function(a){return a.charAt(0).toUpperCase()+a.substring(1)};var g=["bytes","KiB","MiB","GiB","TiB"];Object.freeze(g),a.formatSize=function(b){if(null==b)return a.gettext("N/A");for(var c=0;c<g.length&&!(b<1024);c++)b/=1024;return(b=Math.round(100*b)/100)+" "+g[c]};var h={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",32:" ",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",46:"Delete",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z"},i={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Spacebar:" "};a.extractModifiers=function(a){return{altKey:a.altKey,ctrlKey:a.ctrlKey,metaKey:a.metaKey,shiftKey:a.shiftKey}};var j=["Escape","Enter"];a.stopInputKeydownPropagationListener=function(b){var c,d;c=a.extractModifiers(b),d=a.normalizeKey(b),(c.altKey||c.metaKey||c.ctrlKey||-1!==j.indexOf(d))&&"Backspace"!==d||b.stopPropagation()},a.normalizeKey=function(a){var b;return b=a.key,!1===a.altKey&&b?b in i&&(b=i[b]):(b="Unidentified",a.keyCode in h&&(b=h[a.keyCode])),b},a.isElement=function(a){return null!=a&&"object"==typeof a&&"ownerDocument"in a&&a instanceof a.ownerDocument.defaultView.HTMLElement},a.appendChild=function(a,b,c){var d=k(a),e=m(c);return null!=e&&(e=e.nextSibling),"string"==typeof b&&(b=document.createTextNode(b)),n(b).map(function(b){return d.insertBefore(k(b),e),a instanceof StyledElements.StyledElement&&b instanceof StyledElements.StyledElement&&(b.parentElement=a),b})},a.prependChild=function(a,b,c){var d=k(a),e=l(c);return"string"==typeof b&&(b=document.createTextNode(b)),n(b).map(function(b){return d.insertBefore(k(b),null==e?d.firstChild:e),a instanceof StyledElements.StyledElement&&b instanceof StyledElements.StyledElement&&(b.parentElement=a),b})},a.removeChild=function(a,b){k(a).removeChild(k(b)),a instanceof StyledElements.StyledElement&&b instanceof StyledElements.StyledElement&&(b.parentElement=null)};var k=function(a){return a instanceof StyledElements.StyledElement?a.get():a},l=function(a){return a instanceof StyledElements.Fragment?a.elements[0]:a instanceof StyledElements.StyledElement?a.get():a},m=function(a){return a instanceof StyledElements.Fragment?a.elements[a.elements.length-1]:a instanceof StyledElements.StyledElement?a.get():a},n=function(a){return a instanceof StyledElements.StyledElement&&null==a.get()?a.children:[a]};a.isEmpty=function(a){return null==a||0===Object.keys(a).length},a.merge=function(a){if(null==a||"object"!=typeof a)throw new TypeError("object argument must be an object");return Array.prototype.slice.call(arguments,1).forEach(function(b){null!=b&&Object.keys(b).forEach(function(c){a[c]=b[c]})}),a},a.update=function(a){if(null==a||"object"!=typeof a)throw new TypeError("object argument must be an object");return Array.prototype.slice.call(arguments,1).forEach(function(b){null!=b&&Object.keys(b).forEach(function(c){c in a&&(a[c]=b[c])})}),a},a.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},a.waitTransition=function(a){return new Promise(function(b){var c=function c(d){a.removeEventListener("transitionend",c),b()};a.addEventListener("transitionend",c)})},StyledElements.Utils=a}(),function(a,b){"use strict";var c=function(a){Object.defineProperties(this,{context:{value:a},handlers:{value:[]}}),d.set(this,{dispatching:!1})};c.prototype.addEventListener=function(a){if("function"!=typeof a)throw new TypeError("Handlers must be functions");this.handlers.push(a)},c.prototype.removeEventListener=function(a){var b;if("function"!=typeof a)throw new TypeError("Handlers must be functions");for(b=this.handlers.length-1;b>=0;b--)this.handlers[b]===a&&(d.get(this).dispatching?this.handlers[b]=null:this.handlers.splice(b,1))},c.prototype.clearEventListeners=function(){d.get(this).dispatching?this.handlers.forEach(function(a,b,c){c[b]=null}):this.handlers.length=0},c.prototype.dispatch=function(){var a;for(d.get(this).dispatching=!0,a=0;a<this.handlers.length;a++)if(null!=this.handlers[a])try{this.handlers[a].apply(this.context,arguments)}catch(a){null!=window.console&&"function"==typeof window.console.error&&window.console.error(a)}for(a=this.handlers.length-1;a>=0;a--)null==this.handlers[a]&&this.handlers.splice(a,1);d.get(this).dispatching=!1};var d=new WeakMap;StyledElements.Event=c}(StyledElements,StyledElements.Utils),function(a,b){"use strict";a.ObjectWithEvents=function(b){this.events={},(Array.isArray(b)?b:[]).forEach(function(b){this.events[b]=new a.Event(this)},this)},a.ObjectWithEvents.prototype={dispatchEvent:function(a){var c;if(!(a in this.events))throw new Error(b.interpolate("Unhandled event '%(name)s'",{name:a}));return c=[this].concat(Array.prototype.slice.call(arguments,1)),this.events[a].dispatch.apply(this.events[a],c),this},addEventListener:function(a,c){if(!(a in this.events))throw new Error(b.interpolate("Unhandled event '%(name)s'",{name:a}));return this.events[a].addEventListener(c),this},clearEventListeners:function(a){if("string"!=typeof a){for(a in this.events)this.events[a].clearEventListeners();return this}if(!(a in this.events))throw new Error(b.interpolate("Unhandled event '%(name)s'",{name:a}));return this.events[a].clearEventListeners(),this},destroy:function(){return this.events=null,this},removeEventListener:function(a,c){if(!(a in this.events))throw new Error(b.interpolate("Unhandled event '%(name)s'",{name:a}));return this.events[a].removeEventListener(c),this}},a.ObjectWithEvents.prototype.on=a.ObjectWithEvents.prototype.addEventListener,a.ObjectWithEvents.prototype.off=a.ObjectWithEvents.prototype.removeEventListener}(StyledElements,StyledElements.Utils),function(a,b){"use strict";a.StyledElement=function(b){this.wrapperElement=null,this.parentElement=null,Object.defineProperties(this,{enabled:{get:function(){return!this.hasClassName("disabled")},set:function(a){a=!!a,this.enabled!==a&&this.toggleClassName("disabled",!a)._onenabled(a)}},hidden:{get:function(){return this.hasClassName("hidden")},set:function(a){this.toggleClassName("hidden",a)._onhidden(a)}}}),b=Array.isArray(b)?b:[],a.ObjectWithEvents.call(this,["hide","show"].concat(b))},b.inherit(a.StyledElement,a.ObjectWithEvents,{_onenabled:function(a){},_onhidden:function(a){},addClassName:function(a){if(!Array.isArray(a)){if(""===(a=null==a?"":a.toString().trim()))return this;a=a.split(/\s+/)}return a.forEach(c,this),this},appendTo:function(c,d){return c instanceof a.StyledElement&&"function"==typeof c.appendChild?c.appendChild(this,d):b.appendChild(c,this,d),this},destroy:function(){this.remove(),a.ObjectWithEvents.prototype.destroy.call(this)},disable:function(){return this.enabled=!1,this},enable:function(){return this.enabled=!0,this},get:function(){return this.wrapperElement},hide:function(){return this.hidden||(this.hidden=!0,this.dispatchEvent("hide")),this},parent:function(){return null!=this.parentElement?this.parentElement.get():this.get().parentElement},prependTo:function(c,d){return c instanceof a.StyledElement&&"function"==typeof c.prependChild?c.prependChild(this,d):b.prependChild(c,this,d),this},remove:function(){return this.parentElement instanceof a.StyledElement&&"function"==typeof this.parentElement.removeChild?this.parentElement.removeChild(this):this.get().remove(),this},replaceClassName:function(a,b){return this.removeClassName(a),this.addClassName(b),this},show:function(){return this.hidden&&(this.hidden=!1,this.dispatchEvent("show")),this},style:function(a,b){if(1===arguments.length){if("string"==typeof a)return this.get().style[a];for(var c in a)this.get().style[c]=a[c]}else this.get().style[a]=null!=b?b:"";return this},toggleClassName:function(a,b){var f;return Array.isArray(a)||(a=null==a?[]:a.toString().trim(),a=""!==a?a.split(/\s+/):[]),a.length&&("boolean"!=typeof b?a.forEach(e,this):(f=b?c:d,a.forEach(f,this))),this},_getUsableHeight:function(){var a=this.wrapperElement.parentElement;if(null==a)return null;var b=document.defaultView.getComputedStyle(a,null);if(null==b.getPropertyCSSValue("display"))return null;var c=document.defaultView.getComputedStyle(this.wrapperElement,null);return a.offsetHeight-b.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-b.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)},_getUsableWidth:function(){var a=this.wrapperElement.parentElement;if(null==a)return null;var b=document.defaultView.getComputedStyle(a,null),c=document.defaultView.getComputedStyle(this.wrapperElement,null);return a.offsetWidth-b.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX)-b.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX)-c.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX)},getBoundingClientRect:function(){return this.wrapperElement.getBoundingClientRect()},hasClassName:function(a){return a=null==a?"":a.toString().trim(),this.get().classList.contains(a)},insertInto:function(a,b){return null!=b?this.prependTo(a,b):this.appendTo(a)},removeClassName:function(a){if(!Array.isArray(a)){if(""===(a=null==a?"":a.toString().trim()))return this.get().className="",this;a=a.split(/\s+/)}return a.forEach(d,this),this},repaint:function(a){return this},setDisabled:function(a){return a?this.disable():this.enable()}});var c=function(a){this.get().classList.add(a)},d=function(a){this.get().classList.remove(a)},e=function(a){this.get().classList.contains(a)?this.get().classList.remove(a):this.get().classList.add(a)}}(StyledElements,StyledElements.Utils),function(a,b){"use strict";a.OffCanvasLayout=function(c){a.StyledElement.call(this,["slideIn","slideOut"]),c=b.merge({sideway:"left"},c),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-offcanvas "+c.sideway+"-sideway",Object.defineProperties(this,{slipped:{get:function(){return this.hasClassName("slipped")}},sidebar:{value:new a.Container({class:"se-offcanvas-sidebar"})},content:{value:new a.Container({class:"se-offcanvas-content"})}}),this.index=-1,this.sidebar.appendTo(this.wrapperElement),this.content.appendTo(this.wrapperElement)},b.inherit(a.OffCanvasLayout,a.StyledElement,{appendChild:function(a){return this.sidebar.appendChild(a),this.index<0&&(this.index=this.sidebar.children.length-1),this},repaint:function(){return this.slipped&&this.sidebar.repaint(),this.content.repaint(),this},slideIn:function(a){var b;return this.sidebar.children.length&&(this.sidebar.children.forEach(function(a){a.hide()}),"number"==typeof a&&(this.index=a),b=this.sidebar.children[this.index].show()),this.toggleClassName("slipped",!0),this.dispatchEvent("slideIn",b)},slideOut:function(a){return"number"==typeof a&&(this.index=a),this.toggleClassName("slipped",!1),this.dispatchEvent("slideOut")}})}(StyledElements,StyledElements.Utils),function(a){"use strict";var b=function(a,b){this.inputElement=null,this.defaultValue=a,StyledElements.StyledElement.call(this,b)};a.inherit(b,StyledElements.StyledElement),Object.defineProperty(b.prototype,"value",{get:function(){return this.getValue()},set:function(a){return this.setValue(a)}}),b.prototype.getValue=function(){return this.inputElement.value},b.prototype.setValue=function(a){var b=this.inputElement.value;return this.inputElement.value=a,"change"in this.events&&a!==b&&this.dispatchEvent("change"),this},b.prototype.reset=function(){return this.setValue(this.defaultValue)},b.prototype.enable=function(){return StyledElements.StyledElement.prototype.enable.call(this),this.inputElement.disabled=!1,this},b.prototype.disable=function(){return StyledElements.StyledElement.prototype.disable.call(this),this.inputElement.disabled=!0,this},b.prototype.blur=function(){return this.inputElement.blur(),this},b.prototype.focus=function(){return this.inputElement.focus(),this},StyledElements.InputElement=b}(StyledElements.Utils),function(a){"use strict";var b=new WeakMap,c=function(a,c,d){b.set(this,{callback:c,context:a,elements:[],running:!1,step:0,stepTimes:null}),Object.defineProperties(this,{callback:{value:c},context:{value:a},running:{get:f},stepFunc:{value:d}})};c.prototype.addCommand=function(a){if(void 0===a)return Promise.resolve();var c=b.get(this),d=new Promise(function(b,d){c.elements.push({command:a,resolve:b,reject:d})});return c.running||(c.running=!0,e.call(c)),d};var d=function a(){var b;try{b=this.stepFunc(this.step,this.context)}catch(a){e.call(this)}if(b){var c=this.stepTimes[this.step]-(new Date).getTime();c<0&&(c=0),this.step++,setTimeout(a.bind(this),c)}else e.call(this)},e=function a(){var b,c,e;if(void 0===(b=this.elements.shift()))return void(this.running=!1);try{c=this.callback(this.context,b.command)}catch(c){b.reject(c),a.call(this)}!1===c?(b.resolve(),a.call(this)):"function"==typeof c.then?c.then(function(c){b.resolve(c),a.call(this)}.bind(this),function(c){b.reject(c),a.call(this)}.bind(this)):(this.step=0,this.stepTimes=c,e=this.stepTimes[this.step]-(new Date).getTime(),e<0&&(e=0),setTimeout(d.bind(this),e))},f=function(){return b.get(this).running};StyledElements.CommandQueue=c}(StyledElements.Utils),function(a,b){"use strict";a.Container=function(e,f){e=b.merge(b.clone(d),e),a.StyledElement.call(this,f),this.wrapperElement=document.createElement(e.tagname),this.wrapperElement.className="se-container",e.id&&this.wrapperElement.setAttribute("id",e.id),this.addClassName(e.class);var g={children:[]};c.set(this,g),Object.defineProperties(this,{children:{get:function(){return g.children.slice(0)}}})},b.inherit(a.Container,a.StyledElement,{has:function(b){var d=c.get(this);return b instanceof a.StyledElement&&-1!==d.children.indexOf(b)||b.parentElement===this.get()},appendChild:function(a,c){return b.appendChild(this,a,c).forEach(e,this),f.call(this),this},prependChild:function(a,c){return b.prependChild(this,a,c).forEach(e,this),f.call(this),this},removeChild:function(d){if(b.removeChild(this,d),d instanceof a.StyledElement){var e=c.get(this);e.children.splice(e.children.indexOf(d),1)}return this},repaint:function(a){a=void 0!==a&&a;for(var b=c.get(this),d=0;d<b.children.length;d++)b.children[d].repaint(a)},clear:function(){var a=c.get(this);return a.children=[],this.wrapperElement.innerHTML="",this.wrapperElement.scrollTop=0,this.wrapperElement.scrollLeft=0,null!=a.disabledLayer&&this.wrapperElement.appendChild(a.disabledLayer),this},text:function(a){return null==a?this.get().textContent:this.clear().appendChild(""+a)},isDisabled:function(){return!this.enabled},_onenabled:function(a){var b,d;d=c.get(this),a?(null!=d.disabledLayer&&d.disabledLayer.remove(),d.disabledLayer=null):(d.disabledLayer=document.createElement("div"),d.disabledLayer.className="se-container-disable-layer",b=document.createElement("i"),b.className="disable-icon fa fa-spin fa-spinner",d.disabledLayer.appendChild(b),this.wrapperElement.appendChild(d.disabledLayer))}});var c=new WeakMap,d={class:"",id:"",tagname:"div",useFullHeight:!1},e=function(b){var d=c.get(this);if(b instanceof a.StyledElement){-1===d.children.indexOf(b)&&d.children.push(b)}},f=function(){var a,b=[];a=c.get(this),Array.prototype.forEach.call(this.get().childNodes,function(c){var d,e=!1;for(d=0;d<a.children.length&&!e;d++)a.children[d].get()===c&&(b.push(a.children.splice(d,1)[0]),e=!0)}),a.children=b}}(StyledElements,StyledElements.Utils),function(a){"use strict";var b=function(a){var b={class:"",exclusive:!0,full:!0};a=StyledElements.Utils.merge(b,a),this.exclusive=a.exclusive,this.full=a.full,this.children=[],this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.appendWord(a.class,"styled_accordion")};a.inherit(b,StyledElements.StyledElement),b.prototype.createContainer=function(b){var c;return b=a.merge({listenOnTitle:!0},b),c=new StyledElements.Expander(b),c.insertInto(this.wrapperElement),this.exclusive?c.addEventListener("expandChange",function(a,b){var c;b?(c=this.currentContainer,this.currentContainer=a,c&&(c.setExpanded(!1),c.wrapperElement.style.height="")):this.currentContainer===a&&(a.wrapperElement.style.height="",this.currentContainer=null),this.repaint()}.bind(this)):this.full&&c.addEventListener("expandChange",function(a){this.repaint()}.bind(this)),this.children.push(c),null==this.currentContainer&&c.setExpanded(!0),c},b.prototype.repaint=function(a){var b,c,d;if(null!=(b=this._getUsableHeight())&&null!=this.currentContainer){for(d=0;d<this.children.length;d+=1)this.children[d]!==this.currentContainer&&(c=document.defaultView.getComputedStyle(this.currentContainer.wrapperElement,null),b-=this.children[d].wrapperElement.offsetHeight,b-=c.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX));c=document.defaultView.getComputedStyle(this.currentContainer.wrapperElement,null),b-=c.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX),this.currentContainer.wrapperElement.style.height=b+"px",this.currentContainer.repaint(a)}},b.prototype.destroy=function(){var a;for(a=0;a<this.children.length;a+=1)this.children[a].destroy();this.children=null,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.Accordion=b}(StyledElements.Utils),function(a){"use strict";var b=function(b){var c={buttonFloat:"left",class:"",expandButton:!0,listenOnTitle:!1,state:"default",title:null};if(b=a.merge(c,b),!b.expandButton&&!b.listenOnTitle)throw new TypeError;StyledElements.StyledElement.call(this,["expandChange"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=a.appendWord("panel se-expander",b.class),null!=b.state&&""!==b.state.trim()&&this.addClassName("panel-"+b.state);var d=document.createElement("div");d.className="panel-heading",this.wrapperElement.appendChild(d),this.toggleButton=null,b.expandButton&&(this.toggleButton=new StyledElements.ToggleButton({class:"icon-expand",plain:!0}),this.toggleButton.insertInto(d)),this.titleContainer=new StyledElements.Container({class:"title"}),this.titleContainer.insertInto(d),b.title&&this.titleContainer.appendChild(document.createTextNode(b.title)),this.contentContainer=new StyledElements.Container({class:"panel-body"}),this.contentContainer.insertInto(this.wrapperElement);var e=function(){this.setExpanded(!this.isExpanded())}.bind(this);this.toggleButton&&this.toggleButton.addEventListener("click",e),b.listenOnTitle&&(this.titleContainer.wrapperElement.style.cursor="pointer",this.titleContainer.wrapperElement.addEventListener("click",e,!1))};a.inherit(b,StyledElements.StyledElement),b.prototype.repaint=function(a){var b,c;if(this.isExpanded()){if(null==(b=this.wrapperElement.clientHeight))return;c=document.defaultView.getComputedStyle(this.titleContainer.wrapperElement,null),b-=this.titleContainer.wrapperElement.offsetHeight,b-=c.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),c=document.defaultView.getComputedStyle(this.contentContainer.wrapperElement,null),b-=c.getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX),b-=c.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),b<0&&(b=0),this.contentContainer.wrapperElement.style.height=b+"px",this.contentContainer.repaint(a)}},b.prototype.isExpanded=function(){return this.hasClassName("expanded")},b.prototype.setExpanded=function(a){a=!!a,this.isExpanded()!==a&&(a?this.addClassName("expanded"):(this.removeClassName("expanded"),this.contentContainer.wrapperElement.style.height=""),this.toggleButton&&(this.toggleButton.active=a),this.dispatchEvent("expandChange",a))},b.prototype.getTitleContainer=function(){return this.titleContainer},b.prototype.appendChild=function(a){this.contentContainer.appendChild(a)},b.prototype.removeChild=function(a){this.contentContainer.removeChild(a)},b.prototype.clear=function(){this.contentContainer.clear()},StyledElements.Expander=b}(StyledElements.Utils),function(a,b){"use strict";a.Fragment=function(b){a.StyledElement.call(this),this.children=[],Array.isArray(b)?b.forEach(function(a){this.appendChild(a)}.bind(this)):this.appendChild(b),Object.defineProperties(this,{elements:{get:function(){return this.children}}})},b.inherit(a.Fragment,a.StyledElement,{appendChild:function(b){return null==b?this:("string"==typeof b?this.children=this.children.concat(c(b)):b instanceof a.Fragment?this.children=this.children.concat(b.children):this.children.push(b),this)},appendTo:function(a,c){return this.children.forEach(function(d){b.appendChild(a,d,c)}),this},repaint:function(){return this.children.forEach(function(a){"function"==typeof a.repaint&&a.repaint()}),this}});var c=function(a){var b,c=[];return a.length&&(b=document.createElement("div"),b.innerHTML=a,c=Array.prototype.slice.call(b.childNodes)),c}}(StyledElements,StyledElements.Utils),function(a){"use strict";var b,c,d;c=function(a,b){var c=f.get(this);"function"==typeof c.options.processFunc&&c.options.processFunc(a,b),c.currentPage=parseInt(b.current_page,10),c.currentElements=a,c.totalCount!==b.total_count&&(c.totalCount=b.total_count,e.call(this),this.dispatchEvent("paginationChanged")),this.dispatchEvent("requestEnd")},d=function(a){f.get(this).currentElements=[],null==a&&(a={message:"unknown cause"}),this.dispatchEvent("requestEnd",a)},b=function(b){var c={pageSize:25,requestFunc:null,processFunc:null};StyledElements.ObjectWithEvents.call(this,["optionsChanged","paginationChanged","requestStart","requestEnd"]);var d={};f.set(this,d),Object.defineProperties(this,{currentPage:{get:function(){return d.currentPage}},options:{get:function(){return d.options}},totalCount:{get:function(){return d.totalCount}},totalPages:{get:function(){return d.totalPages}},currentElements:{get:function(){return d.currentElements}}}),d.options=a.merge(c,b),d.currentPage=1,d.currentElements=[],d.totalPages=1},a.inherit(b,StyledElements.ObjectWithEvents),b.prototype.getCurrentPage=function(){return this.currentElements},b.prototype.changeOptions=function(a){var b,c,d,g=!1,h=f.get(this);if("object"==typeof a){for(d in a)"pageSize"===d?(b=parseInt(a.pageSize,10),isNaN(b)||b===h.options.pageSize||(g=!0,c=(h.currentPage-1)*h.options.pageSize,h.currentPage=Math.floor(c/b)+1,h.options.pageSize=b,e.call(this))):(g=!0,h.options[d]=a[d],h.currentPage=1);return g&&(this.dispatchEvent("optionsChanged",h.options),this.refresh()),this}},b.prototype.goToFirst=function(){return this.changePage(0)},b.prototype.goToPrevious=function(){var a=f.get(this);return this.changePage(a.currentPage-1)},b.prototype.goToNext=function(){var a=f.get(this);return this.changePage(a.currentPage+1)},b.prototype.goToLast=function(){var a=f.get(this);this.changePage(a.totalPages)};var e=function(){var a=f.get(this);0===a.options.pageSize?a.totalPages=1:(a.totalPages=Math.ceil(a.totalCount/a.options.pageSize),a.totalPages<=0&&(a.totalPages=1))};b.prototype.refresh=function(){var a=f.get(this);this.dispatchEvent("requestStart"),a.options.requestFunc(a.currentPage,a.options,c.bind(this),d.bind(this))},b.prototype.changePage=function(a){var b=f.get(this);a<1?a=1:a>b.totalPages&&(a=b.totalPages),this.dispatchEvent("requestStart"),b.options.requestFunc(a,b.options,c.bind(this),d.bind(this))};var f=new WeakMap;StyledElements.PaginatedSource=b}(StyledElements.Utils),function(a){"use strict";var b,c,d,e,f,g,h,i,j;i="http://wirecloud.conwet.fi.upm.es/StyledElements",j="http://wirecloud.conwet.fi.upm.es/Template",c=function(b,c,d){var e,f,h;if("function"==typeof(f=c[b.localName])){if(""!==(e=b.textContent.trim()))try{e=JSON.parse(e)}catch(a){e={}}else e={};a.merge(e,g(b)),h=f(e,c,d)}else h=f;return h=h instanceof StyledElements.StyledElement||a.isElement(h)?h:null!=h?b.ownerDocument.createTextNode(h):b.ownerDocument.createTextNode("")},d=function a(b,d,e,f){var g,h,k,l;for(g=0;g<d.childNodes.length;g+=1)h=d.childNodes[g],h.nodeType===Node.ELEMENT_NODE&&(h.namespaceURI===i?(k=b.build(h,e,f),k.insertInto(d,h),d.removeChild(h)):h.namespaceURI===j?(l=c(h,e,f),l instanceof StyledElements.StyledElement?l.insertInto(d,h):d.insertBefore(l,h),d.removeChild(h)):a(b,h,e,f))},e=function(a,b,e,f){var g,h,k,l;for(h=Array.prototype.slice.call(b.childNodes,0),g=0;g<h.length;g+=1)(k=h[g])instanceof Element&&(k.namespaceURI===i?(l=a.build(k,e,f),h[g]=l):k.namespaceURI===j?h[g]=c(k,e,f):d(a,k,e,f));return new StyledElements.Fragment(h)},g=function(a){var b,c={};for(b=0;b<a.attributes.length;b++)c[a.attributes[b].localName]=a.attributes[b].nodeValue;return c},f=function(a){var b,c;if(b={},null!=(c=a.ownerDocument.evaluate("s:options",a,function(){return i},XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)){c.parentNode.removeChild(c);try{b=JSON.parse(c.textContent)}catch(a){}}return b},h=function(b,c,d,h,j,k){var l,m,n;null!=(l=c.getElementsByTagNameNS(i,d)[0])&&(n=a.merge(f(l),g(l)),null!=n&&"class"in n&&h.addClassName(n.class),m=e(b,l,j,k),h.appendChild(m))},b=function(){var b={borderlayout:function(a,b,c,d,e){var f=new StyledElements.BorderLayout(c);return h(a,b,"northcontainer",f.north,d,e),h(a,b,"westcontainer",f.west,d,e),h(a,b,"centercontainer",f.center,d,e),h(a,b,"eastcontainer",f.east,d,e),h(a,b,"southcontainer",f.south,d,e),f},button:function(b,c,d){return d=a.merge({},d),d.text=c.textContent,new StyledElements.Button(d)},horizontallayout:function(a,b,c,d,e){var f=new StyledElements.HorizontalLayout(c);return h(a,b,"westcontainer",f.west,d,e),h(a,b,"centercontainer",f.center,d,e),h(a,b,"eastcontainer",f.east,d,e),f},select:function(a,b,c){return new StyledElements.Select(c)},verticallayout:function(a,b,c,d,e){var f=new StyledElements.VerticalLayout(c);return h(a,b,"northcontainer",f.north,d,e),h(a,b,"centercontainer",f.center,d,e),h(a,b,"southcontainer",f.south,d,e),f}};this.build=function(c,d,e){var h,i;return h=b[c.localName],i=a.merge(f(c),g(c)),h(this,c,i,d,e)}},b.prototype.DEFAULT_OPENING='<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml">',b.prototype.DEFAULT_CLOSING="</s:styledgui>",b.prototype.parse=function(a,b,c){var d;if("string"==typeof a&&(d=new DOMParser,a=d.parseFromString(a,"application/xml")),!(a instanceof Document))throw new TypeError("document is not a Document or cannot be parsed into a Document");return e(this,a.documentElement,b,c)},StyledElements.GUIBuilder=b}(StyledElements.Utils),function(a){"use strict";var b=new StyledElements.GUIBuilder,c=function(a,b){switch(this.element.classList.remove("top","right","bottom","left"),b){case"top":this.element.classList.add("top"),this.element.style.left=a.left+(a.width-this.element.offsetWidth)/2+"px",this.element.style.top=a.top-this.element.offsetHeight+"px";break
;case"right":this.element.classList.add("right"),this.element.style.left=a.right+"px",this.element.style.top=a.top+(a.height-this.element.offsetHeight)/2+"px";break;case"bottom":this.element.classList.add("bottom"),this.element.style.left=a.left+(a.width-this.element.offsetWidth)/2+"px",this.element.style.top=a.bottom+"px";break;case"left":this.element.classList.add("left"),this.element.style.left=a.left-this.element.offsetWidth+"px",this.element.style.top=a.top+(a.height-this.element.offsetHeight)/2+"px"}},d=function(){var a=this.element.parentElement.getBoundingClientRect(),b=this.element.getBoundingClientRect(),c=b.width-Math.max(b.right-a.right,0)-Math.max(a.left-b.left,0),d=b.height-Math.max(b.bottom-a.bottom,0)-Math.max(a.top-b.top,0);return b.width*b.height-c*d},e=function(a,b,d){var e=Math.min.apply(Math,b),f=b.indexOf(e),g=d[f];c.call(this,a,g);var h=this.element.parentElement.getBoundingClientRect(),i=this.element.getBoundingClientRect();i.bottom>h.bottom&&(this.element.style.top="",this.element.style.bottom="10px",i=this.element.getBoundingClientRect()),i.top<h.top&&(this.element.style.top="10px")},f=function(a,b){var f=0,g=[];do{c.call(this,a,b[f]),g.push(d.call(this)),f+=1}while(g[f-1]>0&&f<b.length);g[f-1]>0&&e.call(this,a,g,b)},g=function(c){return"Wirecloud"in window&&Wirecloud.UserInterfaceManager._registerTooltip(this),this.visible?(this.element.classList.add("in"),void this.repaint()):("getBoundingClientRect"in c&&(c=c.getBoundingClientRect()),this.element=b.parse('<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml"><div class="tooltip fade" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"><t:content/></div></div></s:styledgui>',{content:this.options.content}).elements[0],this.element.addEventListener("transitionend",i.bind(this)),(a.getFullscreenElement()||document.body).appendChild(this.element),f.call(this,c,this.options.placement),this.element.classList.add("in"),this)},h=function(b){var c={content:"",class:"",placement:["right","bottom","left","top"]};Object.defineProperty(this,"options",{value:a.merge(c,b)}),StyledElements.StyledElement.call(this,[]),Object.defineProperties(this,{element:{value:null,writable:!0},visible:{get:function(){return null!=this.element}}})};a.inherit(h,StyledElements.StyledElement),h.prototype.destroy=function(){this.hide()},h.prototype.bind=function(a){a.addEventListener("focus",this.show.bind(this,a),!1),a.addEventListener("blur",this.hide.bind(this),!1),a.addEventListener("mouseenter",this.show.bind(this,a),!1),a.addEventListener("mouseleave",this.hide.bind(this),!1),a.addEventListener("click",this.hide.bind(this),!1)},h.prototype.toggle=function(a){return this.visible?this.hide():g.call(this,a)},h.prototype.show=function(a){return g.call(this,a)};var i=function(){null==this.element||this.element.classList.contains("in")||(this.element.remove(),this.element=null,"Wirecloud"in window&&Wirecloud.UserInterfaceManager._unregisterTooltip(this))};h.prototype.hide=function(){var a;return this.visible?(a=!this.element.classList.contains("in")||"0"===getComputedStyle(this.element).getPropertyValue("opacity"),this.element.classList.remove("in"),a&&i.call(this),this):this},StyledElements.Tooltip=h}(StyledElements.Utils),function(a,b){"use strict";var c=new WeakMap,d=function(a){a.preventDefault(),a.stopPropagation();var b=c.get(this);this.enabled&&b.related_input&&b.related_input.focus()},e=function(e){var f={text:null,title:"",class:""};e=b.merge(f,e),a.Container.call(this,[]),this.wrapperElement=document.createElement("span"),this.wrapperElement.className="se-add-on",this.addClassName(e.class),c.set(this,{related_input:null}),this.setTitle(e.title),this.setLabel(e.text),this._clickCallback=d.bind(this),this.wrapperElement.addEventListener("mousedown",b.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._clickCallback,!0)};b.inherit(e,a.Container),e.prototype.Tooltip=a.Tooltip,e.prototype.setLabel=function(a){return this.wrapperElement.textContent=a,this},e.prototype.setTitle=function(a){var b=c.get(this);return null==a||""===a?null!=b.tooltip&&(b.tooltip.destroy(),b.tooltip=null):(null==b.tooltip&&(b.tooltip=new this.Tooltip({content:a,placement:["bottom","top","right","left"]}),b.tooltip.bind(this.wrapperElement)),b.tooltip.options.content=a),this},e.prototype.assignInput=function(a){return c.get(this).related_input=a,this},e.prototype.destroy=function(){this.wrapperElement.removeEventListener("mousedown",b.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._clickCallback,!0),delete this._clickCallback,a.StyledElement.prototype.destroy.call(this)},a.Addon=e}(StyledElements,StyledElements.Utils),function(a,b){"use strict";var c=function(a){null!=this.inputElement&&a.target===this.inputElement||(a.preventDefault(),a.stopPropagation(),this.enabled&&(null!=this.inputElement&&this.inputElement.click(),this.dispatchEvent("click")))},d=function(a){a.preventDefault(),a.stopPropagation(),this.enabled&&this.dispatchEvent("dblclick")},e=function(a){var c;this.enabled&&(c=b.extractModifiers(a),c.preventDefault=a.preventDefault.bind(a),c.stopPropagation=a.stopPropagation.bind(a),this._onkeydown(c,b.normalizeKey(a)))},f=function(){this.dispatchEvent("mouseenter")},g=function(){this.dispatchEvent("mouseleave")},h=function(){this.dispatchEvent("focus")},i=function(){this.dispatchEvent("blur")},j=function(){this.enabled?this.wrapperElement.setAttribute("tabindex",this.tabindex):this.wrapperElement.setAttribute("tabindex",-1)},k=function(k){k=b.merge(b.clone(l),k),a.StyledElement.call(this,m),k.usedInForm?(this.wrapperElement=document.createElement("button"),this.wrapperElement.setAttribute("type","button")):this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-btn",this.label=null,this.icon=null,this.badgeElement=null,this.tooltip=null,this.addClassName(k.class),""!==k.id.trim()&&this.wrapperElement.setAttribute("id",k.id),k.plain&&this.addClassName("plain"),this.addIconClassName(k.iconClass),this.setLabel(k.text),this.setTitle(k.title),k.iconClass&&k.stackedIconClass&&(this.stackedIcon=document.createElement("span"),this.stackedIcon.className=[k.stackedIconClass,"se-stacked-icon",k.stackedIconPlacement].join(" "),this.icon.appendChild(this.stackedIcon));var q,r,s;Object.defineProperties(this,{depth:{get:function(){return s},set:function(a){s=p.call(this,s,a)}},state:{get:function(){return n.call(this,r)},set:function(a){r=o.call(this,r,a)}},tabindex:{get:function(){return q},set:function(a){q=a,j.call(this)}}}),this.state=k.state,this.depth=k.depth,this.tabindex=k.tabindex;var t=Object.getPrototypeOf(this);"function"==typeof t._clickCallback?this._clickCallback=t._clickCallback.bind(this):this._clickCallback=c.bind(this),this._onkeydown_bound=e.bind(this),this.wrapperElement.addEventListener("touchstart",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._clickCallback,!1),this.wrapperElement.addEventListener("dblclick",d.bind(this),!0),this.wrapperElement.addEventListener("keydown",this._onkeydown_bound,!1),this.wrapperElement.addEventListener("focus",h.bind(this),!0),this.wrapperElement.addEventListener("blur",i.bind(this),!0),this.wrapperElement.addEventListener("mouseenter",f.bind(this),!1),this.wrapperElement.addEventListener("mouseleave",g.bind(this),!1)};StyledElements.Utils.inherit(k,StyledElements.StyledElement),k.prototype.Tooltip=StyledElements.Tooltip,k.prototype._onenabled=function(a){return j.call(this),a||this.blur(),this},k.prototype._onkeydown=function(a,b){switch(b){case" ":case"Enter":this._clickCallback(a)}},k.prototype.focus=function(){return this.wrapperElement.focus(),this},k.prototype.blur=function(){return this.wrapperElement.blur(),this},k.prototype.setLabel=function(a){return a?r.call(this,a):q.call(this)},k.prototype.clearClassName=function(){return this.wrapperElement.className="se-btn",this},k.prototype.addIconClassName=function(a){if(!Array.isArray(a)){if(""===(a=null==a?"":a.toString().trim()))return this;a=a.split(/\s+/)}return 0===a.length?this:(null==this.icon&&(this.icon=document.createElement("i"),this.icon.classList.add("se-icon"),this.wrapperElement.appendChild(this.icon)),a.forEach(function(a){this.icon.classList.add(a)},this),this)},k.prototype.removeIconClassName=function(a){if(null==this.icon)return this;if(!Array.isArray(a)){if(""===(a=null==a?"":a.toString().trim()))return this.icon.remove(),this.icon=null,this;a=a.split(/\s+/)}return a.forEach(function(a){this.icon.classList.remove(a)},this),"se-icon"===this.icon.className.trim()&&(this.icon.remove(),this.icon=null),this},k.prototype.replaceIconClassName=function(a,b){return this.removeIconClassName(a),this.addIconClassName(b)},k.prototype.setTitle=function(a){return null==a||""===a?null!=this.tooltip&&(this.tooltip.destroy(),this.tooltip=null):(null==this.tooltip&&(this.tooltip=new this.Tooltip({content:a,placement:["bottom","top","right","left"]}),this.tooltip.bind(this)),this.tooltip.options.content=a),this},k.prototype.click=function(){return this.enabled&&this.dispatchEvent("click"),this},k.prototype.destroy=function(){this.wrapperElement.removeEventListener("touchstart",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._clickCallback,!0),this.wrapperElement.removeEventListener("keydown",this._onkeydown_bound,!1),delete this._clickCallback,delete this._onkeydown_bound,StyledElements.StyledElement.prototype.destroy.call(this)},k.prototype.setBadge=function(a,b,c){return a?s.call(this,a,b,!!c):t.call(this)},StyledElements.Button=k;var l={id:"",class:"",iconClass:"",stackedIconClass:"",state:"",plain:!1,usedInForm:!1,text:"",depth:null,title:"",stackedIconPlacement:"bottom-right",tabindex:0},m=["blur","click","dblclick","focus","mouseenter","mouseleave"],n=function(a){return a},o=function(a,b){return-1!==["default","primary","success","info","warning","danger"].indexOf(b)?b!==a&&(a&&this.removeClassName("btn-"+a),a=b,this.addClassName("btn-"+a)):(a&&this.removeClassName("btn-"+a),a=""),a},p=function(a,b){return"number"==typeof b&&b>=0&&b<=5?b!==a&&(a>=0&&this.removeClassName("z-depth-"+a),a=b,this.addClassName("z-depth-"+a)):(null!=a&&this.removeClassName("z-depth-"+a),a=null),a},q=function(){return null!=this.label&&(this.label.remove(),this.label=null),this},r=function(a){return null==this.label&&(this.label=document.createElement("span"),this.wrapperElement.appendChild(this.label)),this.label.textContent=a,this},s=function(a,b,c){var d=["inverse","primary","success","info","warning","danger"];return null==this.badgeElement&&(this.badgeElement=document.createElement("span"),this.wrapperElement.insertBefore(this.badgeElement,this.wrapperElement.firstChild)),this.badgeElement.className="badge",-1!==d.indexOf(b)&&this.badgeElement.classList.add("badge-"+b),this.badgeElement.classList.add("z-depth-"+(this.depth+1)),this.toggleClassName("has-alert",c),this.badgeElement.textContent=a,this},t=function(){return null!=this.badgeElement&&(this.badgeElement.remove(),this.badgeElement=null),this.removeClassName("has-alert"),this}}(StyledElements,StyledElements.Utils),function(a){"use strict";var b,c;c=function(){this.inputElement.files&&(this.dispatchEvent("fileselect",this.inputElement.files),this.inputElement.value="")},b=function(b){var d={multiple:!0};b=a.merge(d,b),StyledElements.Button.call(this,b),Object.defineProperty(this,"inputElement",{value:document.createElement("input")}),this.inputElement.setAttribute("type","file"),this.inputElement.setAttribute("tabindex","-1"),this.inputElement.multiple=b.multiple,this.wrapperElement.appendChild(this.inputElement),this.events.fileselect=new StyledElements.Event,this._onchange=c.bind(this),this.inputElement.addEventListener("change",this._onchange,!0)},a.inherit(b,StyledElements.Button),b.prototype.destroy=function(){this.inputElement.removeEventListener("change",this._onchange,!0),delete this._onchange,StyledElements.Button.prototype.destroy.call(this)},StyledElements.FileButton=b}(StyledElements.Utils),function(a,b){"use strict";var c=["left-bottom","right-bottom","top-left","top-right","bottom-right","bottom-left"];Object.freeze(c);var d=["bottom-left","bottom-right","top-left","top-right"];Object.freeze(d);var e=function(a,b){var d=0;for(d=0;d<c.length;d++)this.wrapperElement.classList.remove("se-popup-menu-"+c[d]);switch(this.wrapperElement.classList.add("se-popup-menu-"+b),b){case"left-bottom":this.wrapperElement.style.left=a.left-this.wrapperElement.offsetWidth+1+"px",this.wrapperElement.style.top=a.top-1+"px";break;case"right-bottom":this.wrapperElement.style.left=a.right-1+"px",this.wrapperElement.style.top=a.top-1+"px";break;case"top-left":this.wrapperElement.style.top=a.top-this.wrapperElement.offsetHeight+1+"px",this.wrapperElement.style.left=a.left+"px";break;case"top-right":this.wrapperElement.style.top=a.top-this.wrapperElement.offsetHeight+1+"px",this.wrapperElement.style.left=a.right-this.wrapperElement.offsetWidth+"px";break;case"bottom-right":this.wrapperElement.style.top=a.bottom-1+"px",this.wrapperElement.style.left=a.right-this.wrapperElement.offsetWidth+"px";break;default:case"bottom-left":this.wrapperElement.style.top=a.bottom-1+"px",this.wrapperElement.style.left=a.left+"px"}},f=function(){var a=this.wrapperElement.parentElement.getBoundingClientRect(),b=this.wrapperElement.getBoundingClientRect(),c=b.width-Math.max(b.right-a.right,0)-Math.max(a.left-b.left,0),d=b.height-Math.max(b.bottom-a.bottom,0)-Math.max(a.top-b.top,0);return b.width*b.height-c*d},g=function(a,b,c){var d=Math.min.apply(Math,b),f=b.indexOf(d),g=c[f];e.call(this,a,g);var h=this.wrapperElement.parentElement.getBoundingClientRect(),i=this.wrapperElement.getBoundingClientRect();i.bottom>h.bottom&&(this.wrapperElement.style.top="",this.wrapperElement.style.bottom="10px",i=this.wrapperElement.getBoundingClientRect()),i.top<h.top&&(this.wrapperElement.style.top="10px")},h=function(a){var b={oneActiveAtLeast:!1,placement:null,useRefElementWidth:!1};a=StyledElements.Utils.merge(b,a),StyledElements.ObjectWithEvents.call(this,["itemOver","visibilityChange","click"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-popup-menu hidden",this._context=null,"position"in a?Array.isArray(a.position)?this._placement=a.position:"string"==typeof a.position?this._placement=[a.placement]:this._placement=d:Array.isArray(a.placement)?this._placement=a.placement:"string"==typeof a.placement?this._placement=[a.placement]:this._placement=d,Object.defineProperties(this,{activeItem:{get:k},firstEnabledItem:{get:l},hidden:{get:n},lastEnabledItem:{get:m},oneActiveAtLeast:{value:a.oneActiveAtLeast},useRefElementWidth:{value:a.useRefElementWidth}}),this._items=[],this._dynamicItems=[],this._submenus=[],this._menuItemCallback=this._menuItemCallback.bind(this),this._menuItem_onactivate_bound=q.bind(this),this._menuItem_ondeactivate_bound=r.bind(this),this._menuItem_onfocus_bound=s.bind(this),this._menuItem_onblur_bound=t.bind(this)};b.inherit(h,StyledElements.ObjectWithEvents);var i=function(a,b){if(a instanceof StyledElements.MenuItem)a.addEventListener("click",this._menuItemCallback),a.addEventListener("mouseenter",this._menuItem_onactivate_bound),a.addEventListener("mouseleave",this._menuItem_ondeactivate_bound),a.addEventListener("focus",this._menuItem_onfocus_bound),a.addEventListener("blur",this._menuItem_onblur_bound);else if(a instanceof StyledElements.SubMenuItem)a.addEventListener("click",this._menuItemCallback),a.menuItem.addEventListener("mouseenter",this._menuItem_onactivate_bound),a.menuItem.addEventListener("mouseleave",this._menuItem_ondeactivate_bound),a.menuItem.addEventListener("focus",this._menuItem_onfocus_bound),a.menuItem.addEventListener("blur",this._menuItem_onblur_bound),a._setParentPopupMenu(this);else if(!(a instanceof StyledElements.DynamicMenuItems||a instanceof StyledElements.Separator))throw null!=a?new TypeError("Invalid chlid element"):new TypeError("The new child element is null");b.push(a)};h.prototype.append=function(a){i.call(this,a,this._items),this.isVisible()&&(j.call(this,a),this._enabledItems.length>0&&this.oneActiveAtLeast&&o.call(this,this._enabledItems[0]))},h.prototype.appendSeparator=function(){this.append(new StyledElements.Separator)},h.prototype.clear=function(){var a;for(this.hidden||p.call(this),a=0;a<this._items.length;a++)this._items[a].removeEventListener("click",this._menuItemCallback);return this._items=[],this},h.prototype.setContext=function(a){this._context=a},h.prototype._menuItemCallback=function(a){this.dispatchEvent("click",a),a.hasClassName("submenu")||this.hide(),"function"==typeof a.run&&a.run(this._context,a.context)},h.prototype.isVisible=function(){return!this.hidden};var j=function(a){var b,c,d;if(a instanceof StyledElements.DynamicMenuItems)for(c=a.build(this._context),b=0;b<c.length;b+=1)d=c[b],i.call(this,d,this._dynamicItems),d instanceof StyledElements.MenuItem||d instanceof StyledElements.Separator?(d.insertInto(this.wrapperElement),d.parentElement=this,d instanceof StyledElements.MenuItem&&d.enabled&&this._enabledItems.push(d)):d instanceof StyledElements.SubMenuItem&&(d._getMenuItem().insertInto(this.wrapperElement),d.parentElement=this,this._enabledItems.push(d.menuItem));else a instanceof StyledElements.MenuItem||a instanceof StyledElements.Separator?(a.insertInto(this.wrapperElement),a.parentElement=this,a instanceof StyledElements.MenuItem&&a.enabled&&this._enabledItems.push(a)):a instanceof StyledElements.SubMenuItem?(a._getMenuItem().insertInto(this.wrapperElement),a._getMenuItem().parentElement=this,this._submenus.push(a),this._enabledItems.push(a.menuItem)):this.wrapperElement.appendChild(a)};h.prototype.show=function(a){var c;if(!this.isVisible()){for(this._enabledItems=[],this._activeMenuItem=null,this._focusedMenuItem=null,c=0;c<this._items.length;c+=1)j.call(this,this._items[c]);this._enabledItems.length>0&&this.oneActiveAtLeast&&o.call(this,this._enabledItems[0]),this.wrapperElement.classList.remove("hidden");if((b.getFullscreenElement()||document.body).appendChild(this.wrapperElement),Wirecloud.UserInterfaceManager._registerPopup(this),this.dispatchEvent("visibilityChange"),!("left"in a)&&"x"in a&&"y"in a)this.wrapperElement.style.top=a.y+"px",this.wrapperElement.style.left=a.x+"px";else{c=0;var d=[];do{e.call(this,a,this._placement[c]),d.push(f.call(this)),c+=1}while(d[c-1]>0&&c<this._placement.length);d[c-1]>0&&g.call(this,a,d,this._placement)}this.useRefElementWidth&&(this.wrapperElement.style.width=a.width+"px")}},h.prototype.moveCursorDown=function(){var a;return this.hasEnabledItem()?(null!=this._activeMenuItem?(this._activeMenuItem.deactivate(),a=this._enabledItems.indexOf(this._activeMenuItem),a!==this._enabledItems.length-1?this._activeMenuItem=this._enabledItems[a+1]:this._activeMenuItem=this.firstEnabledItem):this._activeMenuItem=this.firstEnabledItem,this._activeMenuItem.activate(),this.dispatchEvent("itemOver",this._activeMenuItem),this):this},h.prototype.moveCursorUp=function(){var a;return this.hasEnabledItem()?(null!=this._activeMenuItem?(this._activeMenuItem.deactivate(),a=this._enabledItems.indexOf(this._activeMenuItem),this._activeMenuItem=0!==a?this._enabledItems[a-1]:this.lastEnabledItem):this._activeMenuItem=this.lastEnabledItem,this._activeMenuItem.activate(),this.dispatchEvent("itemOver",this._activeMenuItem),this):this},h.prototype.moveFocusDown=function(){var a;return this.hasEnabledItem()?(null!=this._focusedMenuItem?(a=this._enabledItems.indexOf(this._focusedMenuItem),a!==this._enabledItems.length-1?this._enabledItems[a+1].focus():this.firstEnabledItem.focus()):this.firstEnabledItem.focus(),this):this},h.prototype.moveFocusUp=function(){var a;return this.hasEnabledItem()?(null!=this._focusedMenuItem?(a=this._enabledItems.indexOf(this._focusedMenuItem),0!==a?this._enabledItems[a-1].focus():this.lastEnabledItem.focus()):this.lastEnabledItem.focus(),this):this},h.prototype.hide=function(){return this.hidden?this:(this.wrapperElement.classList.add("hidden"),this.wrapperElement.style.bottom="",p.call(this),this.wrapperElement.remove(),Wirecloud.UserInterfaceManager._unregisterPopup(this),this.dispatchEvent("visibilityChange"))},h.prototype.destroy=function(){var a,b;for(this.hide(),a=0;a<this._items.length;a+=1)(b=this._items[a])instanceof StyledElements.MenuItem&&b.destroy();this._items=null,this._menuItemCallback=null,this._context=null,StyledElements.ObjectWithEvents.prototype.destroy.call(this)},h.prototype.hasEnabledItem=function(){return!this.hidden&&this._enabledItems.length>0};var k=function(){return this.hidden?null:this._activeMenuItem},l=function(){return this.hasEnabledItem()?this._enabledItems[0]:null},m=function(){return this.hasEnabledItem()?this._enabledItems[this._enabledItems.length-1]:null},n=function(){return null==this.wrapperElement.parentElement},o=function(a){this._activeMenuItem=a.activate(),this.dispatchEvent("itemOver",a)},p=function(){var b,c;for(b=this._submenus.length-1;b>=0;b--)this._submenus[b].hide(),this._submenus.splice(b,1);for(b=this._dynamicItems.length-1;b>=0;b--)c=this._dynamicItems[b],c instanceof a.SubMenuItem&&c.hide(),c.destroy(),this._dynamicItems.splice(b,1);this._enabledItems=[],this._activeMenuItem=null,this.wrapperElement.innerHTML=""},q=function(a){var b;for(b=0;b<this._enabledItems.length;b++)this._enabledItems[b].deactivate();o.call(this,a)},r=function(a){this.oneActiveAtLeast?this._activeMenuItem!==a&&a.deactivate():(this._activeMenuItem===a&&(this._activeMenuItem=null),a.deactivate())},s=function(a){this._focusedMenuItem=a},t=function(a){this._focusedMenuItem===a&&(this._focusedMenuItem=null)};StyledElements.PopupMenuBase=h}(StyledElements,StyledElements.Utils),function(a){"use strict";var b=function(a){if(0===a.button){var b=this.wrapperElement.getBoundingClientRect();(a.clientX<b.left||a.clientX>b.right||a.clientY<b.top||a.clientY>b.bottom)&&setTimeout(this.hide.bind(this),0)}},c=function(a){StyledElements.PopupMenuBase.call(this,a),this._disableCallback=b.bind(this)};a.inherit(c,StyledElements.PopupMenuBase),c.prototype.show=function(a){return document.addEventListener("click",this._disableCallback,!0),StyledElements.PopupMenuBase.prototype.show.call(this,a),this},c.prototype.hide=function(){return StyledElements.PopupMenuBase.prototype.hide.call(this),document.removeEventListener("click",this._disableCallback,!0),document.removeEventListener("contextmenu",this._disableCallback,!0),this},c.prototype.destroy=function(){this._disableCallback=null,StyledElements.PopupMenuBase.prototype.destroy.call(this)},StyledElements.PopupMenu=c}(StyledElements.Utils),function(){"use strict";StyledElements.DynamicMenuItems=function(){},StyledElements.DynamicMenuItems.prototype.build=function(){return[]}}(),function(a,b){"use strict";a.MenuItem=function(b,n,o){a.StyledElement.call(this,c),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-popup-menu-item",this.thumbnailElement=document.createElement("div"),this.thumbnailElement.className="se-popup-menu-item-thumbnail",this.bodyElement=document.createElement("div"),this.bodyElement.className="se-popup-menu-item-body",this.wrapperElement.appendChild(this.bodyElement),this.titleElement=document.createElement("div"),this.titleElement.className="se-popup-menu-item-title",this.bodyElement.appendChild(this.titleElement),Object.defineProperties(this,{active:{get:d,set:e},description:{get:f},title:{get:g}}),this.setTitle(b),this.run=n,this.context=o,this._onclick_bound=h.bind(this),this._onmouseenter_bound=i.bind(this),this._onmouseleave_bound=j.bind(this),this.wrapperElement.addEventListener("click",this._onclick_bound,!0),this.wrapperElement.addEventListener("mouseenter",this._onmouseenter_bound),this.wrapperElement.addEventListener("mouseleave",this._onmouseleave_bound),this._onblur_bound=k.bind(this),this._onfocus_bound=l.bind(this),this.wrapperElement.addEventListener("blur",this._onblur_bound),this.wrapperElement.addEventListener("focus",this._onfocus_bound),this._onenabled(!0),this._onkeydown_bound=m.bind(this),this.wrapperElement.addEventListener("keydown",this._onkeydown_bound)},b.inherit(a.MenuItem,a.StyledElement,{_onenabled:function(a){a?this.wrapperElement.setAttribute("tabindex",-1):this.wrapperElement.removeAttribute("tabindex")},activate:function(){return this.active=!0,this},addIconClass:function(a){return null==this.iconElement&&(this.iconElement=document.createElement("span"),this.thumbnailElement.appendChild(this.iconElement)),null==this.thumbnailElement.parentElement&&this.wrapperElement.insertBefore(this.thumbnailElement,this.wrapperElement.firstChild),this.iconElement.className="se-icon "+a,this},deactivate:function(){return this.active=!1,this},destroy:function(){null!=this.wrapperElement.parentElement&&this.wrapperElement.parentElement.removeChild(this.wrapperElement),this.wrapperElement.removeEventListener("click",this._onclick_bound,!0),this.wrapperElement.removeEventListener("mouseenter",this._onmouseenter_bound),this.wrapperElement.removeEventListener("mouseleave",this._onmouseleave_bound),this.wrapperElement.removeEventListener("keydown",this._onkeydown_bound),this.wrapperElement.removeEventListener("blur",this._onblur_bound),this.wrapperElement.removeEventListener("focus",this._onfocus_bound),this._onclick_bound=null,this._onmouseenter_bound=null,this._onmouseleave_bound=null,this._onkeydown_bound=null,this._onblur_bound=null,this._onfocus_bound=null,a.StyledElement.prototype.destroy.call(this)},focus:function(){return this.enabled&&!this.hasFocus()&&(this.wrapperElement.focus(),this.dispatchEvent("focus")),this},hasFocus:function(){return b.hasFocus(this.wrapperElement)},click:function(){return this.enabled&&this.dispatchEvent("click"),this},setDescription:function(b){return null==this.descriptionElement&&(this.descriptionElement=document.createElement("div"),this.descriptionElement.className="se-popup-menu-item-description",this.bodyElement.appendChild(this.descriptionElement)),b instanceof a.StyledElement?(this.descriptionElement.innerHTML="",b.appendTo(this.descriptionElement)):this.descriptionElement.textContent=b,this},setTitle:function(b){return b instanceof a.StyledElement?(this.titleElement.innerHTML="",b.appendTo(this.titleElement)):this.titleElement.textContent=b,this}});var c=["blur","click","focus","mouseenter","mouseleave"],d=function(){return this.hasClassName("active")},e=function(a){this.enabled&&this.active!==a&&this.toggleClassName("active",a)},f=function(){return null!=this.descriptionElement?this.descriptionElement.textContent:""},g=function(){return this.titleElement.textContent},h=function(a){a.stopPropagation(),this.click()},i=function(a){this.enabled&&this.dispatchEvent("mouseenter")},j=function(a){this.enabled&&this.dispatchEvent("mouseleave")},k=function(a){this.enabled&&this.dispatchEvent("blur")},l=function(a){this.enabled&&this.dispatchEvent("focus")},m=function(a){var c;switch(b.normalizeKey(a)){case" ":case"Enter":a.preventDefault(),this.click();break;case"Escape":case"ArrowLeft":a.stopPropagation(),a.preventDefault(),this.parentElement.hide(),this.parentElement instanceof StyledElements.SubMenuItem&&this.parentElement.menuItem.focus();break;case"ArrowUp":a.preventDefault(),this.parentElement.moveFocusUp();break;case"Tab":a.preventDefault(),c="submenu"in this&&this.submenu.isVisible()?this.submenu:this.parentElement,a.shiftKey?c.moveFocusUp():c.moveFocusDown();break;case"ArrowDown":a.preventDefault(),this.parentElement.moveFocusDown();break;case"ArrowRight":a.preventDefault(),"submenu"in this&&(this.submenu.show(this.getBoundingClientRect()),this.submenu.hasEnabledItem()&&this.submenu.moveFocusDown())}}}(StyledElements,StyledElements.Utils),function(a){"use strict";var b=function(){StyledElements.StyledElement.call(this,[]),this.wrapperElement=document.createElement("hr")};a.inherit(b,StyledElements.StyledElement),StyledElements.Separator=b}(StyledElements.Utils),function(a){"use strict";var b=function(b,c){if(0===arguments.length)return!0;c=a.merge({position:["right-bottom","left-bottom"]},c),StyledElements.PopupMenuBase.call(this,c),this.wrapperElement.classList.add("se-popup-submenu"),this.menuItem=new StyledElements.MenuItem(b,function(){this.submenu.show(this.getBoundingClientRect())}),this.menuItem.addClassName("submenu"),this.menuItem.submenu=this};a.inherit(b,StyledElements.PopupMenuBase),b.prototype._getContext=function(){return this.parentMenu instanceof b?this.parentMenu._getContext():this.parentMenu._context},b.prototype._menuItemCallback=function(a){for(var b=this;b.parentMenu;)b=b.parentMenu;b.hide(),a.run(b._context)},b.prototype._setParentPopupMenu=function(a){this.parentMenu=a,this.parentMenu.addEventListener("itemOver",function(a,b){b===this.menuItem?this.show(this.menuItem.getBoundingClientRect()):this.hide()}.bind(this))},b.prototype._getMenuItem=function(){return this.menuItem},b.prototype.addEventListener=function(a,b){switch(a){case"mouseenter":case"mouseleave":case"click":case"blur":case"focus":return this.menuItem.addEventListener(a,b);default:return StyledElements.PopupMenuBase.prototype.addEventListener.call(this,a,b)}},b.prototype.enable=function(){this.menuItem.enable()},b.prototype.disable=function(){this.menuItem.disable()},b.prototype.setDisabled=function(a){this.menuItem.setDisabled(a)},b.prototype.destroy=function(){this.menuItem&&this.menuItem.destroy(),this.menuItem=null,StyledElements.PopupMenuBase.prototype.destroy.call(this)},StyledElements.SubMenuItem=b}(StyledElements.Utils),function(a){"use strict";var b=function(){this.popup_menu.isVisible()?this.wrapperElement.classList.add("open"):this.wrapperElement.classList.remove("open")},c=function(c){var d={menuOptions:null,menu:null};c=a.merge(d,c),StyledElements.Button.call(this,c),null!=c.menu?(this.popup_menu=c.menu,this._owned_popup_menu=!1):(this.popup_menu=new this.PopupMenu(c.menuOptions),this._owned_popup_menu=!0),this.addEventListener("click",function(){this.popup_menu.isVisible()?this.popup_menu.hide():this.popup_menu.show(this.getBoundingClientRect())}.bind(this)),this._visibilityChangeListener=b.bind(this),this.popup_menu.addEventListener("visibilityChange",this._visibilityChangeListener)};a.inherit(c,StyledElements.Button),c.prototype.PopupMenu=StyledElements.PopupMenu,c.prototype._onkeydown=function(a,b){switch(b){case"ArrowDown":a.preventDefault(),this.popup_menu.show(this.getBoundingClientRect()).moveFocusDown();break;case"ArrowUp":a.preventDefault(),this.popup_menu.show(this.getBoundingClientRect()).moveFocusUp();break;case" ":case"Enter":this._clickCallback(a);break;case"Tab":this.popup_menu.hasEnabledItem()&&(a.preventDefault(),this.popup_menu.moveFocusDown())}},c.prototype.getPopupMenu=function(){return this.popup_menu},c.prototype.replacePopupMenu=function(a){this._owned_popup_menu&&(this.popup_menu.destroy(),this._owned_popup_menu=!1),this.popup_menu=a},c.prototype.destroy=function(){StyledElements.Button.prototype.destroy.call(this),this._owned_popup_menu?this.popup_menu.destroy():this.popup_menu.removeEventListener("visibilityChange",this._visibilityChangeListener),this.popup_menu=null},StyledElements.PopupButton=c}(StyledElements.Utils),function(a){"use strict";var b=function(a,b){var c,d,e;for(c="string"==typeof b?[b]:b.slice(0),d=a;null!=d&&c.length>0;)e=c.splice(0,1)[0],d=d[e];if(!(c.length>0))return d},c=function(a,c){return Object.getOwnPropertyNames(a).some(function(d,e,f){var g=b(a,d);switch(typeof g){case"number":return c.test(""+g);case"string":return c.test(g);default:return!1}})},d=function(b){
return new RegExp(a.escapeRegExp(b),"i")},e=function(a){var b,e,f,g=k.get(this);if(!a)return void(g.filteredElements=g.elements.slice(0));var h=d(a);for(b=[],e=0;e<g.elements.length;e+=1)f=g.elements[e],c.call(this,f,h)&&b.push(f);g.filteredElements=b},f=function(a){var c,d,e,f,g,h=k.get(this);if(null==a)return void(h.sortedElements=h.filteredElements);if(c=a[0],d=!1,"-"===c[0]&&(d=!0,c=c.substr(1)),e=h.sort_info[c]||{},"field"in e||(e.field=c),null==(f=e.sortFunc))switch(e.type){case"date":g="function"==typeof e.dateparser?e.dateparser:function(a){return new Date(a)},f=function(a,c){a=b(a,this.field);try{if(a=g(a),isNaN(a.getTime()))throw new Error}catch(b){a=new Date(0)}c=b(c,this.field);try{if(c=g(c),isNaN(c.getTime()))throw new Error}catch(a){c=new Date(0)}return a-c}.bind({field:e.field});break;case"number":f=function(a,c){return a=b(a,this.field),a=null!==a?Number(a):0,c=b(c,this.field),c=null!==c?Number(c):0,a-c}.bind({field:e.field});break;default:case"text":f=function(a,c){return a=b(a,this.field),a=null!=a?a.toString():"",c=b(c,this.field),c=null!=c?c.toString():"",a.localeCompare(c)}.bind({field:e.field})}d&&(f=function(a,b){return-this(a,b)}.bind(f)),h.sortedElements=h.filteredElements.slice(0).sort(f)},g=function(a,b,c,d){var g,h=a,i=k.get(this);if(a>i.totalPages&&(a=i.totalPages),a-=1,e.call(this,this.options.keywords),f.call(this,this.options.order),b.pageSize>0){var j=a*b.pageSize,l=j+b.pageSize;g=i.sortedElements.slice(j,l)}else g=i.sortedElements;c(g,{current_page:h,total_count:i.sortedElements.length})},h=function(){return k.get(this).elements.length},i=function(a){"object"!=typeof a&&(a={}),a.requestFunc=g.bind(this),StyledElements.PaginatedSource.call(this,a);var b={};k.set(this,b),b.sort_info=a.sort_info,"object"!=typeof b.sort_info&&(b.sort_info={}),Object.defineProperties(this,{length:{get:h}}),this.changeElements(a.initialElements)};a.inherit(i,StyledElements.PaginatedSource),i.prototype.changeOptions=function(a){var b=!1;return"keywords"in a&&(e.call(this,a.keywords),b=!0),"order"in a?f.call(this,a.order):b&&f.call(this,this.options.order),StyledElements.PaginatedSource.prototype.changeOptions.call(this,a)},i.prototype.getElements=function(){return k.get(this).elements.slice(0)};var j=function(a,c,d){if(!d)return-2;var e=-1;return a.every(function(a,f){return b(a,d)!==b(c,d)||(e=f,!1)}),e};i.prototype.changeElements=function(a){var c=k.get(this);if(Array.isArray(a)){if(this.options.idAttr){if(!a.every(function(c,d){if(null==b(c,this.options.idAttr))throw new Error("All elements must have a valid ID");return j(a.slice(0,d),c,this.options.idAttr)<=-1}.bind(this)))throw new Error("All elements must have an unique ID")}c.elements=a}else c.elements=[];return e.call(this,this.options.keywords),f.call(this,this.options.order),this.refresh(),this},i.prototype.addElement=function(a){var e=k.get(this);if(this.options.idAttr&&null==b(a,this.options.idAttr))throw new Error("The element must have a valid ID");var g=j(e.elements,a,this.options.idAttr);if(g>=0&&e.elements.splice(g,1),e.elements.push(a),g=j(e.filteredElements,a,this.options.idAttr),g>=0&&e.filteredElements.splice(g,1),this.options.keywords){var h=d(this.options.keywords);c.call(this,a,h)&&e.filteredElements.push(a)}else e.filteredElements.push(a);return f.call(this,this.options.order),this.refresh(),this},i.prototype.removeElement=function(a){var c=k.get(this);if(!this.options.idAttr)throw new Error("options.idAttr is not set");if(null==b(a,this.options.idAttr))throw new Error("The element must have a valid ID");var d=j(c.elements,a,this.options.idAttr);if(d>=0)return c.elements.splice(d,1),e.call(this,this.options.keywords),f.call(this,this.options.order),this;throw new Error("Element does not exist")};var k=new WeakMap;StyledElements.StaticPaginatedSource=i}(StyledElements.Utils),function(a){"use strict";var b,c,d,e,f;d=function(a){if(a.target!==this.inputElement)return this.inputElement.click(),a.stopPropagation(),a.preventDefault(),!1},c=function(){var a,b;a=this.getValue(),b=null!=a?a.name:"",this.name_preview.textContent=b,this.name_preview.setAttribute("title",b),this.dispatchEvent("change")},e=function(){this.wrapperElement.classList.add("focus"),this.dispatchEvent("focus")},f=function(){this.wrapperElement.classList.remove("focus"),this.dispatchEvent("blur")},b=function(b){var g={class:""};b=a.merge(g,b),StyledElements.InputElement.call(this,b.initialValue,["change","focus","blur"]),this.layout=new StyledElements.HorizontalLayout({class:"se-file-field input input-append"}),this.wrapperElement=this.layout.wrapperElement,""!==b.class&&(this.wrapperElement.className+=" "+b.class);var h=document.createElement("div");h.className="input_wrapper",this.wrapperElement.appendChild(h),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","file"),this.inputElement.setAttribute("tabindex",0),h.appendChild(this.inputElement),b.name&&this.inputElement.setAttribute("name",b.name),null!=b.id&&this.wrapperElement.setAttribute("id",b.id),this.name_preview=document.createElement("div"),this.name_preview.className="filename",this.layout.getCenterContainer().appendChild(this.name_preview);var i=document.createElement("div");i.className="se-btn";var j=document.createElement("span");j.textContent=a.gettext("Select"),i.appendChild(j),this.layout.getEastContainer().appendChild(i),this._onchange=c.bind(this),this._onclick=d.bind(this),this._onfocus=e.bind(this),this._onblur=f.bind(this),this.inputElement.addEventListener("mousedown",a.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._onclick,!0),this.inputElement.addEventListener("change",this._onchange,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0)},a.inherit(b,StyledElements.InputElement),b.prototype.repaint=function(){this.layout.repaint()},b.prototype.insertInto=function(a,b){StyledElements.InputElement.prototype.insertInto.call(this,a,b),this.repaint()},b.prototype.getValue=function(){return this.inputElement.files[0]},b.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",a.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._onclick,!0),this.inputElement.removeEventListener("change",this._onchange,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),delete this._onchange,delete this._onfocus,delete this._onblur,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.FileField=b}(StyledElements.Utils),function(a){"use strict";var b=function(a){var b=Number(this.inputElement.value);isNaN(b)?b=a>0&&this.options.min!==Number.NEGATIVE_INFINITY?this.options.min:a<0&&this.options.max!==Number.POSITIVE_INFINITY?this.options.max:0:(b=Math.round(100*(b+a))/100,b>this.options.max?b=this.options.max:b<this.options.min&&(b=this.options.min)),this.inputElement.value=b},c=function(){this.wrapperElement.classList.add("focus"),this.dispatchEvent("focus")},d=function(){this.wrapperElement.classList.remove("focus"),this.dispatchEvent("blur")},e=function(e){var f={initialValue:0,class:"",min:Number.NEGATIVE_INFINITY,max:Number.POSITIVE_INFINITY,inc:1};this.options=e=a.merge(f,e),e.min=Number(e.min),e.max=Number(e.max),e.inc=Number(e.inc),e.initialValue=Number(e.initialValue),StyledElements.InputElement.call(this,e.initialValue,["change","focus","blur"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-numeric-field",this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","text"),null!=e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.inputElement.setAttribute("value",e.initialValue);var g=new StyledElements.Button({class:"se-numeric-field-top-button",iconClass:"fa fa-caret-up"}),h=new StyledElements.Button({class:"se-numeric-field-bottom-button",iconClass:"fa fa-caret-down"});g.addEventListener("click",b.bind(this,e.inc)),h.addEventListener("click",b.bind(this,-e.inc)),this.inputElement.addEventListener("focus",c.bind(this),!0),this.inputElement.addEventListener("blur",d.bind(this),!0),this.inputElement.addEventListener("keydown",a.stopInputKeydownPropagationListener,!1),this.wrapperElement.appendChild(this.inputElement),g.insertInto(this.wrapperElement),h.insertInto(this.wrapperElement)};a.inherit(e,StyledElements.InputElement),e.prototype.getValue=function(){return Number(this.inputElement.value)},StyledElements.NumericField=e}(StyledElements.Utils),function(a,b){"use strict";var c,d,e,f,g;d=function(){this.dispatchEvent("change")},e=function(){this.dispatchEvent("focus")},f=function(){this.dispatchEvent("blur")},g=function(a){"Enter"===b.normalizeKey(a)&&this.dispatchEvent("submit")},c=function(a){var c={initialValue:"",class:"",placeholder:null};a=b.merge(c,a),StyledElements.InputElement.call(this,a.initialValue,["change","focus","blur","submit","keydown"]),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","text"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-text-field",""!==a.class&&(this.wrapperElement.className+=" "+a.class),a.name&&this.inputElement.setAttribute("name",a.name),null!=a.placeholder&&this.setPlaceholder(a.placeholder),null!=a.id&&this.wrapperElement.setAttribute("id",a.id),this.inputElement.setAttribute("value",a.initialValue),this._oninput=d.bind(this),this._onfocus=e.bind(this),this._onblur=f.bind(this),this._onkeypress=g.bind(this),this.inputElement.addEventListener("mousedown",b.stopPropagationListener,!0),this.inputElement.addEventListener("click",b.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0),this.inputElement.addEventListener("keypress",this._onkeypress,!0),this._onkeydown_bound=i.bind(this),this.inputElement.addEventListener("keydown",this._onkeydown_bound,!1)},b.inherit(c,StyledElements.InputElement),c.prototype.setPlaceholder=function(a){this.inputElement.setAttribute("placeholder",a)},c.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",b.stopPropagationListener,!0),this.inputElement.removeEventListener("click",b.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),this.inputElement.removeEventListener("keypress",this._onkeypress,!0),this.inputElement.removeEventListener("keydown",this._onkeydown_bound,!1),delete this._oninput,delete this._onfocus,delete this._onblur,delete this._onkeypress,delete this._onkeydown_bound,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.TextField=c;var h=["Escape","Enter"],i=function(a){var c,d;c=b.extractModifiers(a),d=b.normalizeKey(a),(c.altKey||c.metaKey||c.ctrlKey||-1!==h.indexOf(d))&&"Backspace"!==d||a.stopPropagation(),this.enabled&&(c.preventDefault=a.preventDefault.bind(a),c.stopPropagation=a.stopPropagation.bind(a),c.key=d,this.dispatchEvent("keydown",c,d))}}(StyledElements,StyledElements.Utils),function(a){"use strict";var b,c,d,e;c=function(){this.dispatchEvent("change")},d=function(){this.dispatchEvent("focus")},e=function(){this.dispatchEvent("blur")},b=function(b){var f={initialValue:"",class:""};b=a.merge(f,b),StyledElements.InputElement.call(this,b.initialValue,["blur","change","focus"]),this.inputElement=document.createElement("textarea"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-text-area",""!==b.class&&(this.wrapperElement.className+=" "+b.class),b.name&&this.inputElement.setAttribute("name",b.name),null!=b.id&&this.wrapperElement.setAttribute("id",b.id),this.setValue(b.initialValue),this._oninput=c.bind(this),this._onfocus=d.bind(this),this._onblur=e.bind(this),this.inputElement.addEventListener("mousedown",a.stopPropagationListener,!0),this.inputElement.addEventListener("click",a.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0),this.inputElement.addEventListener("keydown",a.stopInputKeydownPropagationListener,!1)},a.inherit(b,StyledElements.InputElement),b.prototype.select=function(){this.inputElement.select()},b.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",a.stopPropagationListener,!0),this.inputElement.removeEventListener("click",a.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),this.inputElement.removeEventListener("keydown",a.stopInputKeydownPropagationListener,!1),delete this._oninput,delete this._onfocus,delete this._onblur,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.TextArea=b}(StyledElements.Utils),function(a){"use strict";var b=function(){this.listComponent.enabled&&this.listComponent.toggleElementSelection(this.value)},c=function(){for(var a=0;a<this.currentSelection.length;a++){var b=this.currentSelection[a];this.entriesByValue[b].element.classList.remove("selected")}this.currentSelection=[]},d=function(b){b=a.merge({class:"",id:null,multivalued:!1,initialEntries:[],initialSelection:[]},b),StyledElements.StyledElement.call(this,["change"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=a.prependWord(b.class,"styled_list"),null!=b.id&&(this.wrapperElement.id=b.id),this.content=document.createElement("div"),this.wrapperElement.appendChild(this.content),this.entries=[],this.entriesByValue={},this.currentSelection=[],this.addEntries(b.initialEntries),this.select(b.initialSelection),b.full&&this.wrapperElement.classList.add("full"),this.multivalued=b.multivalued,void 0===b.allowEmpty?this.allowEmpty=this.multivalued:this.allowEmpty=b.allowEmpty};a.inherit(d,StyledElements.StyledElement),d.prototype.addEntries=function(a){var c,d;if(null!=a&&0!==a.length){if(!Array.isArray(a))throw new TypeError;for(var e=0;e<a.length;e++){var f=a[e];Array.isArray(f)?(c=f[0],d=f[1]):(c=a[e].value,d=a[e].label),d=d||c;var g=document.createElement("div");g.className="row";var h={listComponent:this,value:c};g.addEventListener("click",b.bind(h),!0),f.element=g,g.appendChild(document.createTextNode(d)),this.content.appendChild(g),this.entriesByValue[c]=f}this.entries=this.entries.concat(a)}},d.prototype.removeEntryByValue=function(a){var b;b=this.entriesByValue[a],delete this.entriesByValue[a],this.entries.slice(this.entries.indexOf(b),1),b.element.remove(),this.currentSelection.splice(void 0,1),this.dispatchEvent("change",this.currentSelection,[],[a])},d.prototype.clear=function(){this.cleanSelection(),this.content.innerHTML="",this.entries=[],this.entriesByValue={}},d.prototype.getSelection=function(){return a.clone(this.currentSelection)},d.prototype.cleanSelection=function(){if(0!==this.currentSelection.length){var a=this.currentSelection;c.call(this),this.dispatchEvent("change",[],[],a)}},d.prototype.select=function(a){c.call(this),this.addSelection(a)},d.prototype.addSelection=function(a){var b,d,e=[],f=[];if(0!==a.length){if(!this.multivalued){if(a[0]===this.currentSelection[0])return;f=this.currentSelection,c.call(this),a.length>1&&(a=a.splice(0,1))}for(b=0;b<a.length;b++)d=a[b],-1===this.currentSelection.indexOf(d)&&(this.entriesByValue[d].element.classList.add("selected"),this.currentSelection.push(d),e.push(d));this.dispatchEvent("change",this.currentSelection,e,f)}},d.prototype.removeSelection=function(a){var b,c,d,e=[];if(0!==a.length){for(b=0;b<a.length;b++)c=a[b],this.entriesByValue[c].element.classList.remove("selected"),-1!==(d=this.currentSelection.indexOf(c))&&(this.currentSelection.splice(d,1),this.entriesByValue[c].element.classList.remove("selected"),e.push(c));e.length>0&&this.dispatchEvent("change",this.currentSelection,[],e)}},d.prototype.toggleElementSelection=function(a){this.entriesByValue[a].element.classList.contains("selected")?this.allowEmpty&&this.removeSelection([a]):this.addSelection([a])},StyledElements.List=d}(StyledElements.Utils),function(a){"use strict";var b,c,d,e;c=function(){this.dispatchEvent("change")},d=function(){this.dispatchEvent("focus")},e=function(){this.dispatchEvent("blur")},b=function(b){var f={initialValue:"",class:""};b=a.merge(f,b),StyledElements.InputElement.call(this,b.initialValue,["change","focus","blur"]),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","password"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-password-field",""!==b.class&&(this.wrapperElement.className+=" "+b.class),"name"in b&&this.inputElement.setAttribute("name",b.name),"id"in b&&this.wrapperElement.setAttribute("id",b.id),this.inputElement.setAttribute("value",b.initialValue),this._oninput=c.bind(this),this._onfocus=d.bind(this),this._onblur=e.bind(this),this.inputElement.addEventListener("mousedown",a.stopPropagationListener,!0),this.inputElement.addEventListener("click",a.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0),this.inputElement.addEventListener("keydown",a.stopInputKeydownPropagationListener,!1)},a.inherit(b,StyledElements.InputElement),b.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",a.stopPropagationListener,!0),this.inputElement.removeEventListener("click",a.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),this.inputElement.removeEventListener("keydown",a.stopInputKeydownPropagationListener,!1),StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.PasswordField=b}(StyledElements.Utils),function(a){"use strict";var b,c,d,e;c=function(a){if(this.enabled){var b=a.target;this.textDiv.textContent=b[b.selectedIndex].text,this.dispatchEvent("change")}},d=function(){this.addClassName("focus").dispatchEvent("focus")},e=function(){this.removeClassName("focus").dispatchEvent("blur")},b=function(b){b=a.merge({class:"",initialEntries:[],initialValue:null,idFunc:function(a){return null==a?"":a.toString()}},b),StyledElements.InputElement.call(this,b.initialValue,["change","focus","blur"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-select",this.addClassName(b.class);var f=document.createElement("div");f.className="se-select-arrow",this.inputElement=document.createElement("select"),b.name&&this.inputElement.setAttribute("name",b.name),b.id&&this.wrapperElement.setAttribute("id",b.id),this.textDiv=document.createElement("div"),this.textDiv.className="se-select-text",this.wrapperElement.appendChild(this.textDiv),this.wrapperElement.appendChild(f),this.wrapperElement.appendChild(this.inputElement),this.optionsByValue={},this.optionValues={},this.idFunc=b.idFunc,this.addEntries(b.initialEntries),this._onchange=c.bind(this),this._onfocus=d.bind(this),this._onblur=e.bind(this),this.inputElement.addEventListener("mousedown",a.stopPropagationListener,!0),this.inputElement.addEventListener("click",a.stopPropagationListener,!0),this.inputElement.addEventListener("change",this._onchange,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0);var g=this.inputElement.options.selectedIndex;-1!==g&&(this.textDiv.textContent=this.inputElement.options[g].text)},a.inherit(b,StyledElements.InputElement),b.prototype.getLabel=function(){return this.textDiv.textContent},b.prototype.getValue=function(){return this.optionValues[this.inputElement.value]},b.prototype.setValue=function(a){if("string"!=typeof a)try{a=this.idFunc(a)}catch(b){a=null}if(null===a||!(a in this.optionValues))if(null!=this.defaultValue)a=this.defaultValue;else{if(!(this.inputElement.options.length>0))return StyledElements.InputElement.prototype.setValue.call(this,""),void(this.textDiv.textContent="");a=this.inputElement.options[0].value}StyledElements.InputElement.prototype.setValue.call(this,a),this.textDiv.textContent=this.optionsByValue[a]},b.prototype.addEntries=function(a){var b,c,d,e,f;if(b=this.inputElement.options.selectedIndex,f=void 0!==this.defaultValue?this.idFunc(this.defaultValue):null,null!=a&&0!==a.length){for(var g=0;g<a.length;g++){e=a[g];var h=document.createElement("option");Array.isArray(e)?(c=e[0],d=e[1]):null!=e.value?(c=e.value,d=e.label):(c=e,d=e),d=d||c;var i=c;"string"!=typeof c&&(c=this.idFunc(c)),h.setAttribute("value",c),h.appendChild(document.createTextNode(d)),f===c&&h.setAttribute("selected","selected"),this.inputElement.appendChild(h),this.optionValues[c]=i,this.optionsByValue[c]=d}var j=this.inputElement.options.selectedIndex;b!==j&&(this.textDiv.textContent=this.inputElement.options[j].text)}},b.prototype.clear=function(){this.textDiv.textContent="",this.inputElement.textContent="",this.optionsByValue={},this.optionValues={}},b.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",a.stopPropagationListener,!0),this.inputElement.removeEventListener("click",a.stopPropagationListener,!0),this.inputElement.removeEventListener("change",this._onchange,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),delete this._onchange,delete this._onfocus,delete this._onblur,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.Select=b}(StyledElements.Utils),function(a){"use strict";StyledElements.ToggleButton=function(b){var c={initiallyChecked:!1};b=a.merge(c,b),StyledElements.Button.call(this,b),Object.defineProperty(this,"active",{get:function(){return this.hasClassName("active")},set:function(a){this.toggleClassName("active",a)}}),this.active=b.initiallyChecked},a.inherit(StyledElements.ToggleButton,StyledElements.Button),StyledElements.ToggleButton.prototype._clickCallback=function(a){a.stopPropagation(),this.click()},StyledElements.ToggleButton.prototype.click=function(){return this.enabled&&(this.active=!this.active,this.dispatchEvent("click")),this}}(StyledElements.Utils),function(a){"use strict";var b=function(a,b){b.preventDefault(),b.stopPropagation(),this.switchPill(a)},c=function(b){var c={class:""};b=a.merge(c,b),StyledElements.StyledElement.call(this,["change"]),this.wrapperElement=document.createElement("ul"),this.wrapperElement.className=a.appendWord(b.class,"se-pills"),this.activePill=null,this.pills={}};a.inherit(c,StyledElements.Container),c.prototype.add=function(a,c){var d=document.createElement("li");d.className="se-pill",d.textContent=c,d.addEventListener("click",b.bind(this,a),!0),this.wrapperElement.appendChild(d),this.pills[a]=d},c.prototype.switchPill=function(a){if(!(a in this.pills))throw new TypeError("Invalid pill id");a!==this.activePill&&(null!=this.activePill&&this.pills[this.activePill].classList.remove("active"),this.activePill=a,this.pills[this.activePill].classList.add("active"),this.dispatchEvent("change",a))},StyledElements.Pills=c}(StyledElements.Utils),function(a,b){"use strict";var c=function c(g,h,i){if(!(h instanceof a.Notebook))throw new TypeError("Invalid notebook argument");var j={closable:!0,containerOptions:{},label:""};i=b.merge(j,i),i.useFullHeight=!0,Object.defineProperties(this,{label:{get:e},notebook:{value:h},tabElement:{get:f},tabId:{value:g}});var k={labelElement:document.createElement("span"),tabElement:document.createElement("li")};if(d.set(this,k),k.tabElement.className="se-notebook-tab",k.tabElement.appendChild(k.labelElement),a.Container.call(this,i.containerOptions,["show","hide","close"]),this.wrapperElement.classList.add("se-notebook-tab-content"),this.wrapperElement.classList.add("hidden"),k.tabElement.addEventListener("click",function(){this.notebook.goToTab(this.tabId)}.bind(this),!1),i.closable){var l=new this.Button({iconClass:"fa fa-remove",plain:!0,class:"close_button"});l.insertInto(k.tabElement),l.addEventListener("click",this.close.bind(this),!1)}null!=i.name&&(i.label=i.name),c.prototype.setLabel.call(this,i.label),this.setTitle(i.title)};b.inherit(c,a.Container),c.prototype.Tooltip=a.Tooltip,c.prototype.Button=a.Button,c.prototype.close=function(){return this.notebook.removeTab(this.tabId),this.dispatchEvent("close")},c.prototype.setLabel=function(a){return d.get(this).labelElement.textContent=a,this},c.prototype.setTitle=function(a){return null==a||""===a?null!=this.tooltip&&(this.tooltip.destroy(),this.tooltip=null):(null==this.tooltip&&(this.tooltip=new this.Tooltip({content:a,placement:["bottom","top","right","left"]}),this.tooltip.bind(d.get(this).tabElement)),this.tooltip.options.content=a),this},c.prototype.setVisible=function(a){return a?this.show():this.hide()},c.prototype.hide=function(){return a.Container.prototype.hide.call(this),d.get(this).tabElement.classList.remove("selected"),this},c.prototype.show=function(){return a.Container.prototype.show.call(this),d.get(this).tabElement.classList.add("selected"),this.repaint(!1),this},c.prototype.getId=function(){return this.tabId},c.prototype.getTabElement=function(){return d.get(this).tabElement},c.prototype.rename=c.prototype.setLabel;var d=new WeakMap,e=function(){return d.get(this).tabElement.textContent},f=function(){return d.get(this).tabElement};a.Tab=c}(StyledElements,StyledElements.Utils),function(a){"use strict";var b=function(){this.dispatchEvent("newTab")},c=function(c){var h;StyledElements.StyledElement.call(this,["change","changed","tabDeletion","tabInsertion","newTab"]);var i={class:"",focusOnSetVisible:!0,full:!0};c=a.merge(i,c),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=a.prependWord(c.class,"se-notebook"),h=new StyledElements.HorizontalLayout({class:"se-notebook-tabs-wrapper",autoHeight:!1}),this.tabWrapper=h,h.insertInto(this.wrapperElement),this.tabArea=new StyledElements.Container,h.center.appendChild(this.tabArea.addClassName("se-notebook-tab-area")),this.moveLeftButton=new this.Button({class:"move_left",iconClass:"fa fa-caret-left"}),h.west.appendChild(this.moveLeftButton),this.moveRightButton=new this.Button({class:"move_right",iconClass:"fa fa-caret-right"}),h.east.appendChild(this.moveRightButton),this.contentArea=document.createElement("div"),this.contentArea.className="se-notebook-content-wrapper",this.wrapperElement.appendChild(this.contentArea),this.tabs=[],this.tabsById=[],this.visibleTab=null,null!=c.id&&this.wrapperElement.setAttribute("id",c.id),c.full&&this.wrapperElement.classList.add("full"),this.focusOnSetVisible=c.focusOnSetVisible,this.events.newTab.addEventListener=function(c){var d;null==this.new_tab_button_tabs&&(d=b.bind(this),this.new_tab_button_tabs=new this.Button({iconClass:"fa fa-plus",class:"se-notebook-new-tab",title:a.gettext("Add Tab")}),this.new_tab_button_tabs.addEventListener("click",d),this.tabArea.appendChild(this.new_tab_button_tabs),this.new_tab_button_left=new this.Button({iconClass:"fa fa-plus",class:"se-notebook-new-tab",title:a.gettext("Add Tab")}),this.new_tab_button_left.addEventListener("click",d),this.addButton(this.new_tab_button_left)),StyledElements.Event.prototype.addEventListener.call(this.events.newTab,c)}.bind(this);var j={control:this,initialScrollLeft:null,finalScrollLeft:null,steps:null,step:null,inc:null},k=function(a,b){var c=b.initialScrollLeft+Math.floor((a+1)*b.inc);return b.inc<0&&c>b.finalScrollLeft||b.inc>0&&c<b.finalScrollLeft?(b.control.tabArea.wrapperElement.scrollLeft=Math.round(c),!0):(b.control.tabArea.wrapperElement.scrollLeft=b.finalScrollLeft,f.call(b.control),!1)},l=function(a,b){var c,f,h,i,j,k,l;switch(a.initialScrollLeft=a.control.tabArea.wrapperElement.scrollLeft,k=document.defaultView.getComputedStyle(a.control.tabArea.wrapperElement,null),l=k.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX),b.type){case"shiftLeft":if(0===a.control.tabs.length||d.call(a.control,0))return!1;c=g.call(a.control),f=a.control.tabs[c-1].getTabElement(),a.finalScrollLeft=f.offsetLeft-l;break;case"shiftRight":if(e.call(a.control))return!1;c=g.call(a.control),f=a.control.tabs[c+1].getTabElement(),a.finalScrollLeft=f.offsetLeft-l;break;case"focus":if(a.control.tabsById[b.tabId])return!1;if(f=a.control.tabsById[b.tabId].getTabElement(),d.call(a.control,a.control.getTabIndex(b.tabId),!0))return!1;a.finalScrollLeft=f.offsetLeft-l}h=a.control.tabArea.wrapperElement.scrollWidth-a.control.tabArea.wrapperElement.clientWidth,a.finalScrollLeft>h&&(a.finalScrollLeft=h),i=(new Date).getTime()+100,j=[],a.steps=6;for(var m=0;m<=a.steps;m++)j[m]=i+100*m;return a.inc=Math.floor((a.finalScrollLeft-a.initialScrollLeft)/a.steps),j};this.transitionsQueue=new StyledElements.CommandQueue(j,l,k),this.moveLeftButton.addEventListener("click",this.shiftLeftTabs.bind(this)),this.moveRightButton.addEventListener("click",this.shiftRightTabs.bind(this)),Object.defineProperty(this,"fullscreen",{get:function(){return a.getFullscreenElement()===this.wrapperElement}})};a.inherit(c,StyledElements.StyledElement),c.prototype.Button=StyledElements.Button,c.prototype.Tab=StyledElements.Tab;var d=function(a,b){var c,d,e,f;return c=this.tabs[a].getTabElement(),d=this.tabArea.wrapperElement.scrollLeft,e=d+this.tabArea.wrapperElement.clientWidth,b?(f=c.offsetLeft+c.offsetWidth,c.offsetLeft>=d&&f<=e):c.offsetLeft>=d&&c.offsetLeft<=e},e=function(){var a=this.tabs.length-1;return!(0!==this.tabs.length&&!d.call(this,a,!0))||!!d.call(this,a)&&(this.tabs.length<2||!d.call(this,a-1))},f=function(){if(0===this.tabs.length)return this.moveLeftButton.disable(),this.moveRightButton.disable(),void(null!=this.new_tab_button_tabs&&(this.new_tab_button_tabs.enable(),this.new_tab_button_left.disable()));var a=d.call(this,0),b=e.call(this);this.moveLeftButton.setDisabled(a),this.moveRightButton.setDisabled(b),null!=this.new_tab_button_tabs&&(a&&b?(this.new_tab_button_tabs.enable(),this.new_tab_button_left.disable()):(this.new_tab_button_tabs.disable(),this.new_tab_button_left.enable()),this.tabWrapper.repaint())},g=function(){var a;for(a=0;a<this.tabs.length;a+=1)if(d.call(this,a))return a;return null};c.prototype.shiftLeftTabs=function(){return this.transitionsQueue.addCommand({type:"shiftLeft"}),this},c.prototype.shiftRightTabs=function(){return this.transitionsQueue.addCommand({type:"shiftRight"}),this},c.prototype.createTab=function(b){var c={initiallyVisible:!1,tab_constructor:this.Tab};b=a.merge(c,b);var d=this.tabsById.push(null);if(b.tab_constructor!==this.Tab&&!(b.tab_constructor.prototype instanceof StyledElements.Tab))throw new TypeError;var e=new b.tab_constructor(d,this,b);this.tabs[this.tabs.length]=e,this.tabsById[d]=e;var g=e.getTabElement();return null!=this.new_tab_button_tabs?this.tabArea.prependChild(g,this.new_tab_button_tabs):this.tabArea.appendChild(g),e.insertInto(this.contentArea),this.visibleTab||(this.visibleTab=e,e.setVisible(!0)),f.call(this),b.initiallyVisible&&this.goToTab(d),this.dispatchEvent("tabInsertion",e),e},c.prototype.getTab=function(a){return this.tabsById[a]},c.prototype.getTabByLabel=function(a){for(var b=0;b<this.tabs.length;b++)if(this.tabs[b].label===a)return this.tabs[b];return null},c.prototype.getVisibleTab=function(){return this.visibleTab},c.prototype.getTabByIndex=function(a){return this.tabs[a]},c.prototype.getTabIndex=function(a){for(var b=0;b<this.tabs.length;b++)if(this.tabs[b].tabId===a)return b;return null},c.prototype.removeTab=function(a){var b,c,d
;if(a instanceof StyledElements.Tab){if(this.tabsById[a.tabId]!==a)throw new TypeError("tab is not owned by this notebook");a=a.getId()}return this.tabsById[a]?(delete this.tabsById[a],b=this.getTabIndex(a),c=this.tabs.splice(b,1)[0],this.tabArea.removeChild(c.getTabElement()),this.contentArea.removeChild(c.wrapperElement),f.call(this),this.visibleTab===c&&this.tabs.length>0?(d=this.tabs[b],d||(d=this.tabs[b-1]),this.goToTab(d.tabId)):this.visibleTab===c&&(this.visibleTab=null),c.dispatchEvent("close",this),this.dispatchEvent("tabDeletion",c),this):this},c.prototype.goToTab=function(a,b){var c,d;if(a instanceof StyledElements.Tab){if(this.tabsById[a.tabId]!==a)throw new TypeError("tab is not owned by this notebook");c=a}else if(null==(c=this.tabsById[a]))throw new TypeError("Invalid tab id");if(d=this.visibleTab,null==b&&(b={}),this.visibleTab&&c===this.visibleTab)return void(this.focusOnSetVisible&&this.focus(c.tabId));this.dispatchEvent("change",d,c,b.context),this.visibleTab&&this.visibleTab.setVisible(!1),this.visibleTab=c,this.visibleTab.setVisible(!0),this.focusOnSetVisible&&this.focus(c.tabId),this.dispatchEvent("changed",d,c,b.context)},c.prototype.getNumberOfTabs=function(){return this.tabs.length},c.prototype.focus=function(a){this.transitionsQueue.addCommand({type:"focus",tabId:a})},c.prototype.repaint=function(a){var b;if(a=null!=a&&a,this.tabWrapper.repaint(),f.call(this),a)this.visibleTab&&this.visibleTab.repaint(!0);else for(b=0;b<this.tabs.length;b++)this.tabs[b].repaint(!1);return this},c.prototype._onenabled=function(a){a?(this.disabledLayer.remove(),this.disabledLayer=null):(this.disabledLayer=document.createElement("div"),this.disabledLayer.classList.add("se-container-disable-layer"),this.wrapperElement.appendChild(this.disabledLayer))},c.prototype.clear=function(){return this.tabs=[],this.tabsById=[],this.visibleTab=null,this.tabArea.clear(),this.contentArea.innerHTML="",f.call(this),this},c.prototype.addButton=function(a,b){if(!(a instanceof StyledElements.Button||a instanceof StyledElements.Select))throw new TypeError;switch(b=b||"right"){case"left":this.tabWrapper.west.prependChild(a,this.moveLeftButton);break;case"right":this.tabWrapper.east.appendChild(a)}return this},c.prototype.requestFullscreen=function(){return"requestFullscreen"in this.wrapperElement?this.wrapperElement.requestFullscreen():"msRequestFullscreen"in this.wrapperElement?this.wrapperElement.msRequestFullscreen():"mozRequestFullScreen"in this.wrapperElement?this.wrapperElement.mozRequestFullScreen():"webkitRequestFullscreen"in this.wrapperElement&&this.wrapperElement.webkitRequestFullscreen(),this},c.prototype.exitFullscreen=function(){return!0!==this.fullscreen?this:("exitFullscreen"in document?document.exitFullscreen():"msExitFullscreen"in document?document.msExitFullscreen():"mozCancelFullScreen"in document?document.mozCancelFullScreen():"webkitExitFullscreen"in document&&document.webkitExitFullscreen(),this)},c.prototype.destroy=function(){this.remove(),this.tabs=null,this.tabsById=null,this.visibleTab=null,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.Notebook=c}(StyledElements.Utils),function(a,b){"use strict";var c=function(b,c){a.Container.call(this,c,["hide","show"]),this.addClassName("hidden"),Object.defineProperties(this,{altId:{value:b}})};b.inherit(c,a.Container),c.prototype._onhidden=function(b){return b||this.repaint(!1),a.Container.prototype._onhidden.call(this,b)},c.prototype.setVisible=function(a){return a?this.show():this.hide()},c.prototype.isVisible=function(){return!this.hidden},c.prototype.getId=function(){return this.altId},a.Alternative=c}(StyledElements,StyledElements.Utils),function(a){"use strict";var b=function(b){var g={class:"",full:!0,defaultEffect:StyledElements.Alternatives.NONE};b=a.merge(g,b),StyledElements.StyledElement.call(this,["preTransition","postTransition"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=a.prependWord(b.class,"se-alternatives"),b.id&&this.wrapperElement.setAttribute("id",b.id),b.full&&this.wrapperElement.classList.add("full"),Object.defineProperties(this,{alternatives:{get:d},alternativeList:{get:e},defaultEffect:{value:b.defaultEffect,writable:!0}});var h=function(b,d){var e,g,h,i=c.get(b);switch(h=Promise.resolve(),d.type){case"transit":if(e=d.inAlternative,g=b.visibleAlt,e===g)return a.callCallback(d.onComplete,b,g,e),!1;h=f(d.effect,g,e,b);break;case"remove":g=d.outAlternative,i.visibleAlt===g&&(i.alternativeList.length>0?(e=i.alternativeList[d.index],e||(e=i.alternativeList[d.index-1]),h=f(d.effect,g,e,b)):i.visibleAlt=null),h=h.then(function(){b.wrapperElement.removeChild(g.wrapperElement)}.bind(this))}return h.then(function(){a.callCallback(d.onComplete,b,g,e)})};c.set(this,{nextAltId:0,transitionsQueue:new StyledElements.CommandQueue(this,h),visibleAlt:null,alternatives:{},alternativeList:[]})};a.inherit(b,StyledElements.StyledElement),b.HORIZONTAL_FLIP="horizontalflip",b.HORIZONTAL_SLIDE="horizontalslide",b.CROSS_DISSOLVE="dissolve",b.NONE="none",b.prototype.repaint=function(a){var b=c.get(this);return null!=b.visibleAlt&&b.visibleAlt.repaint(!!a),this},b.prototype.createAlternative=function(b){var d=c.get(this),e={alternative_constructor:StyledElements.Alternative,containerOptions:{},initiallyVisible:!1};b=a.update(e,b),b.containerOptions.parentElement=this;var f=c.get(this).nextAltId++;if(b.alternative_constructor!==StyledElements.Alternative&&!(b.alternative_constructor.prototype instanceof StyledElements.Alternative))throw new TypeError;var g=new b.alternative_constructor(f,b.containerOptions);return g.parentElement=this,g.insertInto(this.wrapperElement),d.alternatives[f]=g,d.alternativeList.push(g),d.visibleAlt?b.initiallyVisible&&this.showAlternative(g):(d.visibleAlt=g,g.setVisible(!0)),g},b.prototype.removeAlternative=function(b,d){var e,f,g;if(g=c.get(this),d=a.update({effect:this.defaultEffect,onComplete:null},d),b instanceof StyledElements.Alternative){if(f=b.altId,g.alternatives[f]!==b)throw new TypeError("alternative is not owner by this alternatives element")}else if(f=b,!(b=g.alternatives[b]))return a.callCallback(d.onComplete),Promise.resolve();return delete g.alternatives[f],e=g.alternativeList.indexOf(b),g.alternativeList.splice(e,1),g.transitionsQueue.addCommand({effect:d.effect,index:e,type:"remove",onComplete:d.onComplete,outAlternative:b})},b.prototype.clear=function(){var a=c.get(this);return a.alternatives={},a.alternativeList=[],a.nextAltId=0,a.visibleAlt=null,this.wrapperElement.innerHTML="",this},b.prototype.getCurrentAlternative=function(){return c.get(this).visibleAlt},Object.defineProperties(b.prototype,{visibleAlt:{get:b.prototype.getCurrentAlternative}}),b.prototype.showAlternative=function(b,d){var e,f={};if(d=a.update({effect:this.defaultEffect,onComplete:null},d),e=c.get(this),b instanceof StyledElements.Alternative){if(e.alternatives[b.altId]!==b)throw new TypeError("Invalid alternative");f.inAlternative=b}else{if(null==e.alternatives[b])throw new TypeError("Invalid alternative");f.inAlternative=e.alternatives[b]}return f.type="transit",f.onComplete=d.onComplete,f.effect=d.effect,e.transitionsQueue.addCommand(f)};var c=new WeakMap,d=function(){return a.clone(c.get(this).alternatives)},e=function(){return c.get(this).alternativeList.slice(0)},f=function(b,d,e,f){var g=new Promise(function(a){f.dispatchEvent("preTransition",d,e),f.wrapperElement.classList.add("se-on-transition"),a()});switch(b){case StyledElements.Alternatives.HORIZONTAL_SLIDE:d.addClassName("slide"),e.addClassName(["slide",e.altId<d.altId?"left":"right"]).show(),g=g.then(function(){return Promise.all([a.waitTransition(e.get()),a.waitTransition(d.get())])}).then(function(){e.removeClassName("slide"),d.removeClassName("slide left right").hide()}),setTimeout(function(){d.addClassName(e.altId<d.altId?"right":"left"),e.removeClassName("left right")},10);break;case StyledElements.Alternatives.CROSS_DISSOLVE:e.addClassName("fade").show(),d.addClassName("fade in"),g=g.then(function(){return Promise.all([a.waitTransition(e.get()),a.waitTransition(d.get())])}).then(function(){e.removeClassName("fade in"),d.removeClassName("fade").hide()}),setTimeout(function(){e.addClassName("in"),d.removeClassName("in")},10);break;default:case StyledElements.Alternatives.NONE:g=g.then(function(){e.show(),d.hide()})}return g.then(function(){c.get(f).visibleAlt=e,f.wrapperElement.classList.remove("se-on-transition"),f.dispatchEvent("postTransition",d,e)})};StyledElements.Alternatives=b}(StyledElements.Utils),function(a){"use strict";var b=function(b){StyledElements.StyledElement.call(this,[]),this.options=a.merge({class:""},b),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=a.appendWord(this.options.class,"se-horizontal-layout"),this.west=new StyledElements.Container({class:"se-hl-west-container"}),this.center=new StyledElements.Container({class:"se-hl-center-container"}),this.east=new StyledElements.Container({class:"se-hl-east-container"}),this.west.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.east.insertInto(this.wrapperElement)};a.inherit(b,StyledElements.StyledElement),b.prototype.repaint=function(a){this.west.repaint(a),this.center.repaint(a),this.east.repaint(a)},b.prototype.getWestContainer=function(){return this.west},b.prototype.getCenterContainer=function(){return this.center},b.prototype.getEastContainer=function(){return this.east},StyledElements.HorizontalLayout=b}(StyledElements.Utils),function(a){"use strict";var b=function(b){StyledElements.StyledElement.call(this,[]),this.options=a.merge({class:""},b),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=a.appendWord(this.options.class,"se-vertical-layout"),this.north=new StyledElements.Container({class:"se-vl-north-container"}),this.center=new StyledElements.Container({class:"se-vl-center-container"}),this.south=new StyledElements.Container({class:"se-vl-south-container"}),this.north.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.south.insertInto(this.wrapperElement)};a.inherit(b,StyledElements.StyledElement),b.prototype.repaint=function(a){this.north.repaint(a),this.center.repaint(a),this.south.repaint(a)},StyledElements.VerticalLayout=b}(StyledElements.Utils),function(a){"use strict";var b=function(b){StyledElements.StyledElement.call(this,[]),b=a.merge({class:""},b),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=a.appendWord(b.class,"se-border-layout"),Object.defineProperties(this,{north:{value:new StyledElements.Container({class:"se-bl-north-container"})},west:{value:new StyledElements.Container({class:"se-bl-west-container"})},center:{value:new StyledElements.Container({class:"se-bl-center-container"})},east:{value:new StyledElements.Container({class:"se-bl-east-container"})},south:{value:new StyledElements.Container({class:"se-bl-south-container"})}}),this.north.insertInto(this.wrapperElement),this.west.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.east.insertInto(this.wrapperElement),this.south.insertInto(this.wrapperElement)};a.inherit(b,StyledElements.StyledElement),b.prototype.repaint=function(a){var b={width:this.wrapperElement.offsetWidth,height:this.wrapperElement.offsetHeight},c=this.north.wrapperElement.offsetHeight,d=b.height-this.south.wrapperElement.offsetHeight,e=d-c;e<0&&(e=0);var f=this.west.wrapperElement.offsetWidth,g=b.width-this.east.wrapperElement.offsetWidth,h=g-f;h<0&&(h=0),this.west.wrapperElement.style.top=c+"px",this.west.wrapperElement.style.height=e+"px",this.center.wrapperElement.style.top=c+"px",this.center.wrapperElement.style.height=e+"px",this.center.wrapperElement.style.width=h+"px",this.center.wrapperElement.style.left=f+"px",this.east.wrapperElement.style.top=c+"px",this.east.wrapperElement.style.height=e+"px",this.east.wrapperElement.style.left=g+"px",this.south.wrapperElement.style.top=d+"px",this.north.repaint(a),this.west.repaint(a),this.center.repaint(a),this.east.repaint(a),this.south.repaint(a)},b.prototype.getNorthContainer=function(){return this.north},b.prototype.getWestContainer=function(){return this.west},b.prototype.getCenterContainer=function(){return this.center},b.prototype.getEastContainer=function(){return this.east},b.prototype.getSouthContainer=function(){return this.south},StyledElements.BorderLayout=b}(StyledElements.Utils),function(a){"use strict";var b=function(){var b,c,d,e,f,g=o.get(this);for(g.headerCells=[],b=0;b<this.columns.length;b+=1)c=this.columns[b],e=null!=c.label?c.label:c.field,d=document.createElement("div"),d.className="se-model-table-cell","string"==typeof c.class&&d.classList.add(c.class),null!=c.width&&"css"!==c.width?(d.style.width=c.width,d.style.flexGrow=0):"css"===c.width&&(d.style.flexGrow=0),d.textContent=e,!1!==c.sortable&&(d.classList.add("sortable"),f=new this.Tooltip({content:a.interpolate(a.gettext("Sort by %(column_name)s"),{column_name:e}),placement:["bottom","top","right","left"]}),f.bind(d),d.callback=h.bind({widget:this,column:b}),d.addEventListener("click",d.callback,!0)),g.header.appendChild(d),g.headerCells.push(d)},c=function(){var a=o.get(this);this.selection.forEach(function(b){b in a.current_elements&&a.current_elements[b].row.classList.add("highlight")},this)},d=function(a){var b,d,e,f,g,h,l,m,p,q,r=o.get(this);for(n.call(this),b=0;b<a.length;b+=1){for(e=a[b],h=k.bind({table:this,item:e,index:b}),f=document.createElement("div"),f.className="se-model-table-row",b%2==1&&f.classList.add("odd"),q=r.stateFunc(e),null!=q&&f.classList.add("se-model-table-row-"+q),d=0;d<this.columns.length;d+=1)p=this.columns[d],g=document.createElement("div"),g.className="se-model-table-cell",r.columnsCells[d].push(g),"string"==typeof p.width&&"css"!==p.width?(g.style.width=p.width,g.style.flexGrow=0):"css"===p.width&&(g.style.flexGrow=0),"string"==typeof p.class&&g.classList.add(p.class),p.contentBuilder?m=p.contentBuilder(e):"date"===p.type?""===i(e,p.field)?m="":(l||(l=new Date),m=j.call(this,e,p.field,l,p.dateparser)):"number"===p.type?""!==(m=i(e,p.field))&&p.unit&&(m=m+" "+p.unit):m=i(e,p.field),null==m&&(m=""),"string"==typeof m?g.textContent=m:"number"==typeof m||"boolean"==typeof m?g.textContent=""+m:m instanceof StyledElements.StyledElement?(m.insertInto(g),r.components.push(m)):g.appendChild(m),g.addEventListener("click",h,!1),r.listeners.push({element:g,callback:h}),f.appendChild(g),"function"==typeof r.extractIdFunc&&(r.current_elements[r.extractIdFunc(e)]={row:f,data:e});r.tableBody.appendChild(f)}0===a.length&&this.source.currentPage&&(f=document.createElement("div"),f.className="alert alert-info se-model-table-msg",f.textContent=this.emptyMessage,r.tableBody.appendChild(f)),c.call(this)},e=function(a,b){if(null==b)this.reload();else{var c=o.get(this);n.call(this);var d=document.createElement("div");d.className="alert alert-danger",d.textContent=b,c.tableBody.appendChild(d)}},f=function(d,f){var h,i,j,k,m,n;n={initialSortColumn:-1,pageSize:5,emptyMessage:a.gettext("No data available"),selectionType:"none"},f=a.merge(n,f),h=null!=f.class?a.appendWord("se-model-table full",f.class):"se-model-table full";var p={};o.set(this,p),StyledElements.StyledElement.call(this,["click","select"]);var p={};o.set(this,p),p.selection=[],p.selectionType=f.selectionType;var q;if(null!=f.source)q=f.source;else if(null!=f.pagination)q=f.pagination;else{for(k={},i=0;i<d.length;i+=1)j=d[i],m=m in j?j.sort_id:j.field,k[m]=j;q=new StyledElements.StaticPaginatedSource({pageSize:f.pageSize,sort_info:k,idAttr:f.id})}if(p.layout=new StyledElements.VerticalLayout({class:h}),Object.defineProperties(this,{columns:{writable:!0,value:d},emptyMessage:{writable:!0,value:f.emptyMessage},selection:{get:function(){return p.selection},set:function(a){if(!l(p.selectionType))throw new Error("Selection is disabled");if(!Array.isArray(a))throw new TypeError;if("single"===p.selectionType&&a.length>1)throw new Error('Selection is set to "single" but tried to select more than one rows.');p.selection.forEach(function(a){a in p.current_elements&&p.current_elements[a].row.classList.remove("highlight")},this),p.selection=a,c.call(this)}},source:{writable:!1,value:q},statusBar:{get:function(){return p.statusBar}}}),this.wrapperElement=p.layout.wrapperElement,this.wrapperElement.addEventListener("click",function(a){var b=o.get(this);l(b.selectionType)&&(a.shiftKey||a.ctrlKey||(this.select([]),this.events.select.dispatch([])))}.bind(this)),p.header=p.layout.north,p.header.addClassName("se-model-table-headrow"),b.call(this),p.components=[],p.listeners=[],p.tableBody=p.layout.center,p.tableBody.addClassName("se-model-table-body"),p.statusBar=p.layout.south,p.statusBar.addClassName("se-model-table-statusrow"),p.sortColumn=null,Object.defineProperty(this,"pagination",{get:function(){return this.source}}),this.source.addEventListener("requestEnd",e.bind(this)),0!==this.source.options.pageSize&&(p.paginationInterface=new StyledElements.PaginationInterface(this.source),p.statusBar.appendChild(p.paginationInterface)),-1===f.initialSortColumn){for(i=0;i<this.columns.length;i+=1)if(!1!==this.columns[i].sortable){f.initialSortColumn=i;break}-1===f.initialSortColumn&&(f.initialSortColumn=null)}else if("string"==typeof f.initialSortColumn){for(i=0;i<this.columns.length;i+=1)if(this.columns[i].field===f.initialSortColumn){f.initialSortColumn=i;break}"string"==typeof f.initialSortColumn&&(f.initialSortColumn=null)}g.call(this,f.initialSortColumn,f.initialDescendingOrder),p.current_elements={},"string"==typeof f.id?p.extractIdFunc=function(a){return a[f.id]}:"function"==typeof f.id&&(p.extractIdFunc=f.id),"function"==typeof f.stateFunc?p.stateFunc=f.stateFunc:p.stateFunc=function(){}};a.inherit(f,StyledElements.StyledElement),f.prototype.Tooltip=StyledElements.Tooltip,f.prototype.select=function(a){return this.selection=null!=a?Array.isArray(a)?a:[a]:[],this};var g=function(a,b){var c,d,e,f,g=o.get(this);null!=g.sortColumn&&(e=g.headerCells[g.sortColumn],e.classList.remove("ascending"),e.classList.remove("descending")),g.sortInverseOrder=b,g.sortColumn=a,null!=g.sortColumn?(f=g.headerCells[g.sortColumn],g.sortInverseOrder?(f.classList.remove("ascending"),f.classList.add("descending")):(f.classList.remove("descending"),f.classList.add("ascending")),a=this.columns[g.sortColumn],c=null!=a.sort_id?a.sort_id:a.field,g.sortInverseOrder&&(c="-"+c),d=[c]):d=null,this.source.changeOptions({order:d})},h=function(){var a=o.get(this.widget),b=a.sortColumn===this.column&&!a.sortInverseOrder;g.call(this.widget,this.column,b)},i=function(a,b){var c,d,e;for(c="string"==typeof b?[b]:b.slice(),d=a;null!=d&&c.length>0;)e=c.splice(0,1)[0],d=d[e];return null==d||c.length>0?"":d},j=function(a,b,c,d){var e,f,g,h,j,k;e=i(a,b),"function"==typeof d?e=d(e):e instanceof Date||(e=new Date(e)),f=moment(e),g=f.fromNow(),h=f.format("LLLL"),j=document.createElement("span"),j.textContent=g,k=new this.Tooltip({content:h,placement:["bottom","top","right","left"]}),k.bind(j);var l=setInterval(function(){j.ownerDocument.body.contains(j)||clearInterval(l);var a=f.fromNow();j.textContent!==a&&(j.textContent=a)},1e3);return j},k=function(a){a.stopPropagation(),m.call(this.table,this.item,a,this.index),this.table.events.click.dispatch(this.item,a)},l=function(a){return"single"===a||"multiple"===a},m=function(a,b,c){var d=o.get(this);if(l(d.selectionType)){var e,f,g,h,i,j,k=d.extractIdFunc(a);if("multiple"===d.selectionType&&b.ctrlKey&&b.shiftKey)if(f=this.source.getCurrentPage(),-1===(g=f.indexOf(d.lastSelected)))d.lastSelected=a,e=[k];else{e=d.savedSelection.slice(),e.splice(e.indexOf(d.extractIdFunc(d.lastSelected)),1);var m=[];for(h=Math.min(c,g),i=Math.max(c,g),j=h;j<=i;j++)m.push(d.extractIdFunc(f[j]));e=e.concat(m),b.target.ownerDocument.defaultView.getSelection().removeAllRanges()}else if("multiple"===d.selectionType&&b.shiftKey)if(f=this.source.getCurrentPage(),-1===(g=f.indexOf(d.lastSelected)))d.lastSelected=a,e=[k];else{for(e=[],h=Math.min(c,g),i=Math.max(c,g),j=h;j<=i;j++)e.push(d.extractIdFunc(f[j]));b.target.ownerDocument.defaultView.getSelection().removeAllRanges()}else if("multiple"===d.selectionType&&b.ctrlKey){d.lastSelected=a,e=this.selection.slice();var n=e.indexOf(k);-1!==n?(d.lastSelected=null,e.splice(n,1)):e.push(k),d.savedSelection=e}else e=[k],d.lastSelected=a,d.savedSelection=e;this.select(e),this.events.select.dispatch(e)}},n=function(){var a,b,c=o.get(this);for(a=0;a<c.listeners.length;a+=1)b=c.listeners[a],b.element.removeEventListener("click",b.callback,!1);for(c.components=[],c.listeners=[],c.columnsCells=[],a=0;a<this.columns.length;a+=1)c.columnsCells[a]=[];c.tableBody.clear(),c.current_elements={}};f.prototype.reload=function(){d.call(this,this.source.getCurrentPage())},f.prototype.destroy=function(){var a,b,c=o.get(this);for(a=0;a<c.headerCells.length;a+=1)b=c.headerCells[a],b.callback&&(b.removeEventListener("click",b.callback,!0),b.callback=null);return n.call(this),c.layout.destroy(),c.layout=null,c.paginationInterface&&(c.paginationInterface.destroy(),c.paginationInterface=null),this.source.destroy(),this};var o=new WeakMap;StyledElements.ModelTable=f}(StyledElements.Utils),function(a){"use strict";var b=function(a){var b=document.createRange();b.selectNodeContents(this.wrapperElement);var c=window.getSelection();c.removeAllRanges(),c.addRange(b),document.addEventListener("mousedown",this._onBlur,!1)},c=function(a){13===a.keyCode?this._onBlur():27===a.keyCode&&(this.wrapperElement.textContent=this._prev_content,this._onBlur())},d=function(a){if(this.wrapperElement.hasAttribute("contenteditable")){document.removeEventListener("mousedown",this._onBlur,!1);var b=this.wrapperElement.textContent;this.wrapperElement.textContent=b,this._prev_content!==b&&this.dispatchEvent("change",b),this.disableEdition()}},e=function(a){StyledElements.StyledElement.call(this,["change"]),this.wrapperElement=document.createElement("span"),this.setTextContent(a.initialContent),this._onFocus=b.bind(this),this._onKeydown=c.bind(this),this._onBlur=d.bind(this),this.wrapperElement.addEventListener("focus",this._onFocus,!0),this.wrapperElement.addEventListener("keydown",this._onKeydown,!0),this.wrapperElement.addEventListener("blur",this._onBlur,!0)};a.inherit(e,StyledElements.StyledElement),e.prototype.disableEdition=function(){this.wrapperElement.hasAttribute("contenteditable")&&(this.wrapperElement.removeEventListener("mousedown",a.stopPropagationListener,!0),this.wrapperElement.removeAttribute("contenteditable"),this.wrapperElement.blur(),this.wrapperElement.scrollLeft=0,this.wrapperElement.scrollTop=0)},e.prototype.enableEdition=function(){this.wrapperElement.hasAttribute("contenteditable")||(this.wrapperElement.addEventListener("mousedown",a.stopPropagationListener,!0),this.wrapperElement.setAttribute("contenteditable","true"),this._prev_content=this.wrapperElement.textContent),this.wrapperElement.focus()},e.prototype.setTextContent=function(a){return this.wrapperElement.textContent=a,this},e.prototype.destroy=function(){this.wrapperElement.removeEventListener("focus",this._onFocus,!0),this.wrapperElement.removeEventListener("keydown",this._onKeydown,!0),this.wrapperElement.removeEventListener("blur",this._onBlur,!0),this._onFocus=null,this._onKeydown=null,this._onBlur=null,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.EditableElement=e}(StyledElements.Utils),function(a){"use strict";var b=function(b){var c={initialValue:"",class:""};b=a.merge(c,b),StyledElements.InputElement.call(this,b.initialValue,[]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=a.prependWord(b.class,"styled_hidden_field"),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","hidden"),null!=b.name&&this.inputElement.setAttribute("name",b.name),null!=b.id&&this.wrapperElement.setAttribute("id",b.id),this.inputElement.setAttribute("value",b.initialValue),this.wrapperElement.appendChild(this.inputElement)};a.inherit(b,StyledElements.InputElement),StyledElements.HiddenField=b}(StyledElements.Utils),function(a){"use strict";var b=function(a){StyledElements.InputElement.call(this,"",["change"]),Object.defineProperty(this,"name",{value:a}),this.buttons=[]};a.inherit(b,StyledElements.InputElement),b.prototype.insertButton=function(a){return this.buttons[this.buttons.length]=a,a.addEventListener("change",function(){this.dispatchEvent("change")}.bind(this)),this},b.prototype.getValue=function(){var a,b=[];if(this.buttons[0]instanceof StyledElements.CheckBox)for(a=0;a<this.buttons.length;a++)this.buttons[a].inputElement.checked&&b.push(this.buttons[a].getValue());else for(a=0;a<this.buttons.length;a++)if(this.buttons[a].inputElement.checked)return this.buttons[a].getValue();return b},b.prototype.setValue=function(a){null==a?a=[]:"string"==typeof a&&(a=[a]);for(var b=0;b<this.buttons.length;b++)-1!==a.indexOf(this.buttons[b].inputElement.value)?this.buttons[b].setValue(!0):this.buttons[b].setValue(!1);return this},b.prototype.reset=function(){for(var a=0;a<this.buttons.length;a++)this.buttons[a].reset();return this},b.prototype.getSelectedButtons=function(){var a;if(0===this.buttons.length)return[];if(this.buttons[0]instanceof StyledElements.CheckBox){var b=[];for(a=0;a<this.buttons.length;a++)this.buttons[a].inputElement.checked&&(b[b.length]=this.buttons[a]);return b}for(a=0;a<this.buttons.length;a++)if(this.buttons[a].inputElement.checked)return[this.buttons[a]];return[]},StyledElements.ButtonsGroup=b}(StyledElements.Utils),function(a){"use strict";var b=function(b){var c={initialValue:!1,class:"",group:null,secondInput:null,value:!0};b=a.merge(c,b),"initiallyChecked"in b&&(b.initialValue=b.initiallyChecked),StyledElements.InputElement.call(this,b.initialValue,["change"]),this.wrapperElement=document.createElement("input"),this.wrapperElement.className="checkbox",this.wrapperElement.setAttribute("type","checkbox"),this.inputElement=this.wrapperElement,null!=b.name&&this.inputElement.setAttribute("name",b.name),null!=b.id&&this.wrapperElement.setAttribute("id",b.id),this.checkedValue=b.value,this.inputElement.setAttribute("value",b.value),this.secondInput=b.secondInput,this.setValue(b.initialValue),b.group instanceof StyledElements.ButtonsGroup?(this.wrapperElement.setAttribute("name",b.group.name),b.group.insertButton(this)):"string"==typeof b.group&&this.wrapperElement.setAttribute("name",b.group),this.inputElement.addEventListener("mousedown",a.stopPropagationListener,!0),this.inputElement.addEventListener("click",a.stopPropagationListener,!0),this.inputElement.addEventListener("change",function(){this.enabled&&(null!=this.secondInput&&this.secondInput.setDisabled(!this.inputElement.checked),this.dispatchEvent("change"))}.bind(this),!0)};a.inherit(b,StyledElements.InputElement),b.prototype.reset=function(){this.setValue(this.defaultValue)},b.prototype.getValue=function(){return!0===this.checkedValue&&null==this.secondInput?this.inputElement.checked:null==this.secondInput?this.inputElement.checked?this.checkedValue:null:this.secondInput.getValue()},b.prototype.setValue=function(a){this.inputElement.checked=null!=a&&!1!==a,null!=this.secondInput&&(this.secondInput.setDisabled(!this.inputElement.checked),this.inputElement.checked&&this.secondInput.setValue(a))},StyledElements.CheckBox=b}(StyledElements.Utils),function(a){"use strict";var b=function(b){var c={initiallyChecked:!1,class:"",group:null,value:null};b=a.merge(c,b),StyledElements.InputElement.call(this,b.initiallyChecked,["change"]),this.wrapperElement=document.createElement("input"),this.wrapperElement.setAttribute("type","radio"),null!=b.value&&this.wrapperElement.setAttribute("value",b.value),this.inputElement=this.wrapperElement,null!=b.name&&this.inputElement.setAttribute("name",b.name),null!=b.id&&this.wrapperElement.setAttribute("id",b.id),!0===b.initiallyChecked&&this.inputElement.setAttribute("checked",!0),b.group instanceof StyledElements.ButtonsGroup?(this.wrapperElement.setAttribute("name",b.group.name),b.group.insertButton(this)):"string"==typeof b.group&&this.wrapperElement.setAttribute("name",b.group),this.inputElement.addEventListener("mousedown",a.stopPropagationListener,!0),this.inputElement.addEventListener("click",a.stopPropagationListener,!0),this.inputElement.addEventListener("change",function(){this.enabled&&this.dispatchEvent("change")}.bind(this),!0)};a.inherit(b,StyledElements.InputElement),b.prototype.insertInto=function(a,b){var c=this.inputElement.checked;StyledElements.StyledElement.prototype.insertInto.call(this,a,b),this.inputElement.checked=c},b.prototype.reset=function(){return this.inputElement.checked=this.defaultValue,this},b.prototype.setValue=function(a){return this.inputElement.checked=a,this},StyledElements.RadioButton=b}(StyledElements.Utils),function(a){"use strict";var b=function(a,b){0!==arguments.length&&(StyledElements.StyledElement.call(this,[]),b.name=a,this._fieldId=a,this._initialValue=b.initialValue,this._defaultValue=b.defaultValue,this._label=b.label,Object.defineProperty(this,"required",{value:"required"in b&&!!b.required}),this._readOnly=!!b.readOnly,this._hidden=!!b.hidden,b.description?this._description=b.description:this._description=b.label)};a.inherit(b,StyledElements.StyledElement),b.prototype.repaint=function(){this.inputElement.repaint()},b.prototype.getValue=function(){return this.inputElement.getValue()},b.prototype.setValue=function(a){this.isValidValue(a)&&this._setValue(a)},b.prototype.getLabel=function(){return this._label},b.prototype.getDescription=function(){return this._description},b.prototype.getDefaultValue=function(){return this._defaultValue},b.prototype.isEmpty=function(){return this._isEmptyValue(this.getValue())},b.prototype._isEmptyValue=function(a){return""===a||null==a},b.prototype._normalize=function(a){return null==a?"":(""+a).trim()},b.prototype._checkValue=function(a){return StyledElements.InputValidationError.NO_ERROR},b.prototype.checkValue=function(a){if(a=void 0===a?this.getValue():this._normalize(a),!(this instanceof StyledElements.SelectInputInterface)){if(this.required&&this._isEmptyValue(a))return StyledElements.InputValidationError.REQUIRED_ERROR;if(!this.required&&this._isEmptyValue(a))return StyledElements.InputValidationError.NO_ERROR}return this._checkValue(a)},b.prototype.validate=function(){null!=this.timeout&&clearTimeout(this.timeout);var a=this.checkValue();this._setError(a!==StyledElements.InputValidationError.NO_ERROR)},b.prototype.isValidValue=function(a){return this.checkValue(a)===StyledElements.InputValidationError.NO_ERROR},b.prototype._setValue=function(a){a=this._normalize(a),this.inputElement.setValue(a)},b.prototype._setError=function(a){a?this.inputElement.wrapperElement.classList.add("error"):this.inputElement.wrapperElement.classList.remove("error")},b.prototype.resetToDefault=function(){this._setError(!1),this._setValue(this._defaultValue)},b.prototype.reset=function(){this._setError(!1),this._setValue(this._initialValue)},b.prototype.focus=function(){this.inputElement.focus()},b.prototype.setDisabled=function(a){this.inputElement.setDisabled(this._readOnly||a)},b.prototype.enable=function(){this.setDisabled(!1)},b.prototype.disable=function(){this.setDisabled(!0)},b.prototype.insertInto=function(a){this.inputElement.insertInto(a)},b.prototype.assignDefaultButton=function(a){},StyledElements.InputInterface=b}(StyledElements.Utils),function(a){"use strict";var b=function(a,b){0!==arguments.length&&(StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.TextField(b),this.inputElement.addEventListener("change",function(){null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.validate.bind(this),700)}.bind(this)),this.inputElement.addEventListener("blur",this.validate.bind(this)))};a.inherit(b,StyledElements.InputInterface),b.parse=function(a){
return a},b.stringify=function(a){return a},b.prototype.assignDefaultButton=function(a){this.inputElement.addEventListener("submit",function(){a.click()})},StyledElements.TextInputInterface=b}(StyledElements.Utils),function(){"use strict";var a,b={};b.NO_ERROR=0,b.REQUIRED_ERROR=1,b.URL_ERROR=2,b.EMAIL_ERROR=3,b.ID_ERROR=4,b.COLOR_ERROR=5,b.BOOLEAN_ERROR=6,b.VERSION_ERROR=7,b.OUT_OF_RANGE_ERROR=8,StyledElements.InputValidationError=b,a=function(){this.fieldsWithErrorById={}},a.prototype._addValidationError=function(a,b){void 0===this.fieldsWithErrorById[a]&&(this.fieldsWithErrorById[a]=[]),this.fieldsWithErrorById[a].push(b)},a.prototype.validate=function(a){var b=a.checkValue();b!==StyledElements.InputValidationError.NO_ERROR?(a._setError(!0),this._addValidationError(b,a.getLabel())):a._setError(!1)},a.prototype._buildErrorMsg=function(a){var b,c,d;switch(a=parseInt(a,10)){case StyledElements.InputValidationError.REQUIRED_ERROR:b=StyledElements.Utils.gettext("The following required fields are empty: %(fields)s.");break;case StyledElements.InputValidationError.URL_ERROR:b=StyledElements.Utils.gettext("The following fields do not contain a valid URL: %(fields)s.");break;case StyledElements.InputValidationError.EMAIL_ERROR:b=StyledElements.Utils.gettext("The following fields do not contain a valid E-Mail address: %(fields)s.");break;case StyledElements.InputValidationError.VERSION_ERROR:b=StyledElements.Utils.gettext("The following field do not contain a valid version number: %(fields)s.");break;case StyledElements.InputValidationError.ID_ERROR:b=StyledElements.Utils.gettext("The following fields contain invalid characters: %(fields)s.");break;case StyledElements.InputValidationError.COLOR_ERROR:b=StyledElements.Utils.gettext("The following fields do not contain a valid color value: %(fields)s.");break;case StyledElements.InputValidationError.OUT_OF_RANGE_ERROR:b=StyledElements.Utils.gettext("The following fields does contain an out of range value: %(fields)s.")}for(c="",d=0;d<this.fieldsWithErrorById[a].length;d+=1)c+=", "+this.fieldsWithErrorById[a][d];return c=c.substring(2),StyledElements.Utils.interpolate(b,{fields:c})},a.prototype.toHTML=function(){var a,b=[];for(a in this.fieldsWithErrorById)this.fieldsWithErrorById.hasOwnProperty(a)&&b.push(this._buildErrorMsg(a));return b},StyledElements.ValidationErrorManager=a;var c=function(a,b){0!==arguments.length&&(StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.PasswordField(b))};c.prototype=new StyledElements.InputInterface,c.parse=StyledElements.TextInputInterface.parse,c.stringify=StyledElements.TextInputInterface.stringify,StyledElements.PasswordInputInterface=c;var d=function(a,b){0!==arguments.length&&(StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.List(b))};d.prototype=new StyledElements.InputInterface,d.prototype.parse=function(a){return JSON.parse(a)},d.prototype.stringify=function(a){return JSON.stringify(a)},d.prototype._normalize=function(a){Array.isArray(a)||(a=[])},d.prototype._setValue=function(a){this.inputElement.cleanSelection(),this.inputElement.addSelection(a)},d.prototype.getValue=function(){return this.inputElement.getSelection()},d.prototype.isEmpty=function(){return 0===this.getValue().length},StyledElements.ListInputInterface=d;var e=function(a,b){0!==arguments.length&&(StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.NumericField(b))};e.prototype=new StyledElements.InputInterface,e.parse=function(a){return Number(a)},e.prototype._normalize=function(a){return null==a?0:Number(a)},e.prototype._checkValue=function(a){return!Number.isFinite(a)||a<this.inputElement.options.min||a>this.inputElement.options.max?StyledElements.InputValidationError.OUT_OF_RANGE_ERROR:StyledElements.InputValidationError.NO_ERROR},StyledElements.NumberInputInterface=e;var f=function(a,b){StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.TextArea(b),this.events.blur=this.inputElement.events.blur};f.prototype=new StyledElements.InputInterface,f.parse=StyledElements.TextInputInterface.parse,f.stringify=StyledElements.TextInputInterface.stringify,StyledElements.LongTextInputInterface=f;var g=function(a,b){0!==arguments.length&&StyledElements.TextInputInterface.call(this,a,b)};g.prototype=new StyledElements.TextInputInterface,g.parse=StyledElements.TextInputInterface.parse,g.stringify=StyledElements.TextInputInterface.stringify,g.prototype._URLChecker=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,g.prototype._checkValue=function(a){return this._URLChecker.test(a)?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.URL_ERROR},StyledElements.URLInputInterface=g;var h=function(a,b){StyledElements.TextInputInterface.call(this,a,b)};h.prototype=new StyledElements.TextInputInterface,h.prototype._EMailChecker=/^[\w\d._%+-]+@[\w\d.\-]+\.[\w]{2,4}$/,h.prototype._checkValue=function(a){return this._EMailChecker.test(a)?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.EMAIL_ERROR},StyledElements.EMailInputInterface=h;var i=function(a,b){StyledElements.InputInterface.call(this,a,b),"string"==typeof b.initialValue?b.initiallyChecked="true"===b.initialValue.toLowerCase():"boolean"==typeof b.initialValue&&(b.initiallyChecked=b.initialValue),this.inputElement=new StyledElements.CheckBox(b)};i.prototype=new StyledElements.InputInterface,i.parse=function(a){return"true"===(""+a).trim().toLowerCase()},i.stringify=function(a){return""+a},i.prototype.isEmpty=function(){return!1},i.prototype._normalize=function(a){return!!a},i.prototype._checkValue=function(a){return"boolean"==typeof a?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.BOOLEAN_ERROR},StyledElements.BooleanInputInterface=i;var j=function(a,b){if("required"in b||(b.required=!0),StyledElements.InputInterface.call(this,a,b),"function"==typeof b.entries)this._update=b.entries;else if(b.initialEntries&&!this.required){var c,d=!1;for(c=0;c<b.initialEntries.length;c+=1)if(this._isEmptyValue(b.initialEntries[c].value)){d=!0;break}d||(b.initialEntries=[{label:"---------",value:null}].concat(b.initialEntries))}this.inputElement=new StyledElements.Select(b)};j.prototype=new StyledElements.InputInterface,j.parse=function(a){return a},j.stringify=function(a){return""+a},j.prototype._setValue=function(a){var b;this._update&&(this.inputElement.clear(),b=this._update(),this.required||(b=[{label:"---------",value:null}].concat(b)),this.inputElement.addEntries(b)),this.inputElement.setValue(a)},j.prototype._checkValue=function(a){var b;if("string"!=typeof a)try{b=this.inputElement.idFunc(a)}catch(a){}else b=a;return"string"==typeof b&&b in this.inputElement.optionValues?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.OUT_OF_RANGE_ERROR},StyledElements.SelectInputInterface=j;var k=function(a,b){StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.StyledHiddenField(b)};k.prototype=new StyledElements.InputInterface,StyledElements.HiddenInputInterface=k;var l=function(a,b){var c,d,e,f,g;if(0!==arguments.length){switch(StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.ButtonsGroup(a),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="button_group",b.kind){case"radio":c=StyledElements.RadioButton;break;case"checkbox":c=StyledElements.CheckBox;break;default:throw new Error}for(e=0;e<b.buttons.length;e+=1)d=b.buttons[e],g=document.createElement("label"),g.className=b.kind,f=new c({group:this.inputElement,value:d.value,secondInput:d.secondInput}),f.insertInto(g),g.appendChild(document.createTextNode(d.label)),d.secondInput&&d.secondInput.insertInto(g),this.wrapperElement.appendChild(g);"initialValue"in b&&this.inputElement.setValue(b.initialValue)}};l.prototype=new StyledElements.InputInterface,l.prototype.insertInto=function(a){a.appendChild(this.wrapperElement)},l.prototype._setValue=function(a){this.inputElement.setValue(a)},l.prototype._setError=function(a){},StyledElements.ButtonGroupInputInterface=l;var m=function(a,b){StyledElements.InputInterface.call(this,a,b),this.inputElement=new StyledElements.FileField(b)};m.prototype=new StyledElements.InputInterface,m.prototype.getValue=function(){return this.inputElement.getValue()},m.prototype._setValue=function(a){},m.prototype._setError=function(a){},m.prototype.setDisabled=function(a){this.inputElement.disabled=!!a},StyledElements.FileInputInterface=m;var n=function(a,b){this.entries=[],this.fields=b.fields,this.wrapperElement=new StyledElements.Container,this._addEntry()};n.prototype=new StyledElements.InputInterface,n.prototype._addEntry=function(){var a,b;return a={},a.wrapper=document.createElement("div"),b={"":{type:"lineLayout",fields:this.fields}},a.form=new StyledElements.Form(b,{useHtmlForm:!1,acceptButton:!1,cancelButton:!1,legend:!1}),a.form.wrapperElement.style.display="inline-block",a.form.wrapperElement.style.verticalAlign="middle",a.form.insertInto(a.wrapper),a.addRowButton=new StyledElements.Button({text:"+"}),a.addRowButton.addEventListener("click",function(){this._addEntry()}.bind(this)),a.addRowButton.insertInto(a.wrapper),a.removeRowButton=new StyledElements.Button({text:"-"}),a.removeRowButton.addEventListener("click",function(){this.control._removeEntry(a)}.bind({control:this,entry:a})),a.removeRowButton.insertInto(a.wrapper),this.entries.push(a),this.wrapperElement.appendChild(a.wrapper),a},n.prototype._removeEntry=function(a){var b;this.wrapperElement.removeChild(a.wrapper),b=this.entries.indexOf(a),this.entries.splice(b,1),a.form.destroy(),0===this.entries.length&&this._addEntry()},n.prototype._removeAllEntries=function(){var a,b;for(a=0;a<this.entries.length;a+=1)b=this.entries[a],this.wrapperElement.removeChild(b.wrapper),b.form.destroy();this.entries=[]},n.prototype.getValue=function(){var a,b=[];for(a=0;a<this.entries.length;a+=1)b.push(this.entries[a].form.getData());return b},n.prototype._setValue=function(a){var b,c;for(this._removeAllEntries(),a instanceof Array||(a=[]),b=0;b<a.length;b+=1)c=this._addEntry(),c.form.setData(a[b]);0===this.entries.length&&this._addEntry()},n.prototype._setError=function(a){},StyledElements.MultivaluedInputInterface=n;var o=function(a,b,c){this.form=new StyledElements.Form(b.fields,{factory:c,useHtmlForm:!1,acceptButton:!1,cancelButton:!1,legend:!1})};o.prototype=new StyledElements.InputInterface,o.prototype.repaint=function(){return this.form.repaint()},o.prototype.insertInto=function(a){this.form.insertInto(a)},o.prototype.getValue=function(){return this.form.getData()},o.prototype._setValue=function(a){return this.form.setData(a)},o.prototype._setError=function(a){},StyledElements.FieldSetInterface=o}(),function(a){"use strict";var b=/^([1-9]\d*|0)(?:\.([1-9]\d*|0))*$/,c=function(a,b){null==b&&(b={}),null==b.placeholder&&(b.placeholder="1.0"),StyledElements.TextInputInterface.call(this,a,b)};a.inherit(c,StyledElements.TextInputInterface),c.prototype._checkValue=function(a){return null!=a.match(b)?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.VERSION_ERROR},StyledElements.VersionInputInterface=c}(StyledElements.Utils),function(){"use strict";var a={boolean:StyledElements.BooleanInputInterface,text:StyledElements.TextInputInterface,version:StyledElements.VersionInputInterface,password:StyledElements.PasswordInputInterface,hidden:StyledElements.HiddenInputInterface,list:StyledElements.ListInputInterface,number:StyledElements.NumberInputInterface,longtext:StyledElements.LongTextInputInterface,url:StyledElements.URLInputInterface,email:StyledElements.EMailInputInterface,select:StyledElements.SelectInputInterface,buttons:StyledElements.ButtonGroupInputInterface,file:StyledElements.FileInputInterface,fieldset:StyledElements.FieldSetInterface,multivalued:StyledElements.MultivaluedInputInterface},b=function(){var b=StyledElements.Utils.clone(a);this.createInterface=function(a,c){var d=b[c.type];if(null==d)throw new Error(c.type);var e=new d(a,c,this);return c.initiallyDisabled&&e.disable(),e},this.addFieldType=function(a,c){if(!(c.prototype instanceof StyledElements.InputInterface))throw new TypeError;if(void 0!==b[a])throw new Error;b[a]=c},this.parse=function(a,c){if(null==b[a])throw new TypeError("Invalid data type");return b[a].parse(c)},this.stringify=function(a,c){if(null==b[a])throw new TypeError("Invalid data type");return b[a].stringify(c)}};StyledElements.InputInterfaceFactory=b}(),function(){"use strict";StyledElements.DefaultInputInterfaceFactory=new StyledElements.InputInterfaceFactory}(),function(a,b){"use strict";var c=function(a,c){var g,h,i;if(i={readOnly:!1,buttonArea:null,setdefaultsButton:!1,resetButton:!1,acceptButton:!0,cancelButton:!0,useHtmlForm:!0,factory:StyledElements.DefaultInputInterfaceFactory},c&&c.readOnly&&(i.acceptButton=!1,i.cancelButton=!1),c=b.merge(i,c),null==a||"object"!=typeof a)throw new TypeError("invalid fields parameter");Array.isArray(a)||(a=d(a)),this.setdefaultsButton=null,c.setdefaultsButton instanceof StyledElements.Button?this.setdefaultsButton=c.setdefaultsButton:!0===c.setdefaultsButton&&(this.setdefaultsButton=new StyledElements.Button({usedInForm:c.useHtmlForm,text:b.gettext("Set Defaults")})),this.resetButton=null,c.resetButton instanceof StyledElements.Button?this.resetButton=c.resetButton:!0===c.resetButton&&(this.resetButton=new StyledElements.Button({usedInForm:c.useHtmlForm,text:b.gettext("Reset")})),this.acceptButton=null,c.acceptButton instanceof StyledElements.Button?this.acceptButton=c.acceptButton:!0===c.acceptButton&&(this.acceptButton=new StyledElements.Button({usedInForm:c.useHtmlForm,class:"btn-primary",text:b.gettext("Accept")})),this.cancelButton=null,c.cancelButton instanceof StyledElements.Button?this.cancelButton=c.cancelButton:!0===c.cancelButton&&(this.cancelButton=new StyledElements.Button({usedInForm:c.useHtmlForm,text:b.gettext("Cancel")})),StyledElements.StyledElement.call(this,["submit","cancel"]),this.childComponents=[],this.readOnly=c.readOnly,this.fields={},this.fieldList=a,this.focusField=a.length>0?a[0].name:null,this.fieldInterfaces={},this.factory=c.factory,g=document.createElement("div"),c.useHtmlForm?(this.wrapperElement=document.createElement("form"),this.wrapperElement.addEventListener("submit",function(a){a.preventDefault()},!0),this.wrapperElement.appendChild(g)):this.wrapperElement=g,g.appendChild(this.pBuildFieldTable(a)),this.wrapperElement.className="styled_form",this.msgElement=document.createElement("div"),this.msgElement.className="alert alert-error",g.appendChild(this.msgElement),j.call(this,[]),null!=c.buttonArea?h=c.buttonArea:!1===c.acceptButton&&!1===c.cancelButton||(h=document.createElement("div"),h.className="buttons",g.appendChild(h)),null!=this.setdefaultsButton&&(this.setdefaultsButton.addEventListener("click",this.defaults.bind(this)),this.setdefaultsButton.insertInto(h)),null!=this.resetButton&&(this.resetButton.addEventListener("click",this.reset.bind(this)),this.resetButton.insertInto(h)),null!=this.acceptButton&&(this.acceptButton.addEventListener("click",e.bind(this)),this.acceptButton.insertInto(h)),null!=this.cancelButton&&(this.cancelButton.addEventListener("click",f.bind(this)),this.cancelButton.insertInto(h))};b.inherit(c,StyledElements.StyledElement),c.prototype.repaint=function(a){var b;for(b=0;b<this.childComponents.length;b+=1)this.childComponents[b].repaint(a);for(b in this.fieldInterfaces)this.fieldInterfaces[b].repaint();return this},c.prototype.pBuildFieldGroups=function(a){var b,c,d,e;return b=new StyledElements.Notebook({full:!1}),this.childComponents.push(b),a.forEach(function(a){c=b.createTab({label:a.shortTitle,closable:!1}),c.addEventListener("show",this.repaint.bind(this)),!0===a.nested?(d={name:a.name,type:"fieldset",fields:a.fields},e=this.factory.createInterface(a.name,d),e.assignDefaultButton(this.acceptButton),this.fieldInterfaces[a.name]=e,this.fields[a.name]=d,c.appendChild(e)):c.appendChild(this.pBuildFieldTable(a.fields))},this),b.wrapperElement},c.prototype.pBuildFieldTable=function(a){var b,c;return a[0]&&"group"===a[0].type?this.pBuildFieldGroups(a):(b=document.createElement("table"),b.setAttribute("cellspacing","0"),b.setAttribute("cellpadding","0"),c=document.createElement("tbody"),b.appendChild(c),a.forEach(function(a){var b,d,e=a.name;switch(b=c.insertRow(-1),a.type){case"columnLayout":d=b.insertCell(-1),d.setAttribute("colspan",2),g.call(this,a,d);break;case"lineLayout":d=b.insertCell(-1),d.setAttribute("colspan",2),h.call(this,a,d);break;case"hidden":b.className="hidden";default:i.call(this,e,a,b)}},this),b)},c.prototype.extraValidation=function(a){return[]},c.prototype.getData=function(){var a,b,c;a={};for(b in this.fieldInterfaces)c=this.fieldInterfaces[b],a[b]=c.getValue();return a},c.prototype.setData=function(a){var b,c;if("object"!=typeof a&&void 0!==a)throw new TypeError;if(j.call(this,[]),null!=a)for(c in this.fieldInterfaces)b=this.fieldInterfaces[c],b._setValue(a[c]);else for(c in this.fields)b=this.fieldInterfaces[c],b.reset();return this},c.prototype.update=function(a){var b,c;if(null==a||"object"!=typeof a)throw new TypeError("Invalid data value");j.call(this,[]);for(c in this.fieldInterfaces)c in a&&(b=this.fieldInterfaces[c],b._setValue(a[c]));return this},c.prototype.is_valid=function(){var a,b,c,d=new StyledElements.ValidationErrorManager;for(a in this.fieldInterfaces)d.validate(this.fieldInterfaces[a]);return b=this.extraValidation(this.fields),c=d.toHTML(),null!==b&&(c=c.concat(b)),j.call(this,c),0===c.length},c.prototype.reset=function(){return this.setData()},c.prototype.defaults=function(){var a,b;j.call(this,[]);for(b in this.fields)a=this.fieldInterfaces[b],a._setValue(a._defaultValue);return this},c.prototype.destroy=function(){var a=0;for(a=0;a<this.childComponents.length;a+=1)this.childComponents[a].destroy();this.childComponents=null,this.setdefaultsButton&&(this.setdefaultsButton.destroy(),this.setdefaultsButton=null),this.resetButton&&(this.resetButton.destroy(),this.resetButton=null),this.acceptButton&&(this.acceptButton.destroy(),this.acceptButton=null),this.cancelButton&&(this.cancelButton.destroy(),this.cancelButton=null)},c.prototype._onenabled=function(a){var b,c;for(b in this.fieldInterfaces)c=this.fieldInterfaces[b],c.setDisabled(!a||this.readOnly||c._readOnly);null!=this.resetButton&&(this.resetButton.enabled=a),null!=this.setdefaultsButton&&(this.setdefaultsButton.enabled=a),null!=this.acceptButton&&(this.acceptButton.enabled=a),null!=this.cancelButton&&(this.cancelButton.enabled=a)},c.prototype.focus=function(){var a=this.fieldInterfaces[this.focusField];return a&&a.focus(),this},c.prototype.displayMessage=function(a){j.call(this,[a])},c.prototype.insertInto=function(a,b){StyledElements.StyledElement.prototype.insertInto.call(this,a,b),this.repaint()};var d=function(a){var b,c,d=[];for(b in a)c=a[b],"name"in c||(c.name=b),d.push(c);return d},e=function(){if(this.is_valid()){var a=this.getData();this.dispatchEvent("submit",a)}},f=function(){this.dispatchEvent("cancel")},g=function(a,b){var c,d,e,f,g;for(c=document.createElement("table"),c.setAttribute("cellspacing","0"),c.setAttribute("cellpadding","0"),d=document.createElement("tbody"),c.appendChild(d),e=d.insertRow(-1),g=0;g<a.columns.length;g+=1)f=e.insertCell(-1),f.appendChild(this.pBuildFieldTable(a.columns[g]));b.appendChild(c)},h=function(a,b){d(a.fields).forEach(function(a){var c,d,e;c=a.name,d=this.factory.createInterface(c,a),d.assignDefaultButton(this.acceptButton),d.insertInto(b),e=null,d.wrapperElement&&d.wrapperElement.wrapperElement?e=d.wrapperElement.wrapperElement:d.inputElement&&d.inputElement.wrapperElement&&(e=d.inputElement.wrapperElement),e&&(e.style.display="inline-block",e.style.verticalAlign="middle"),this.fieldInterfaces[c]=d,this.fields[c]=a},this)},i=function(a,b,c){var d,e,f,g,h,i,j,k,l;return"separator"===b.type?(d=c.insertCell(-1),d.setAttribute("colspan","2"),e=document.createElement("hr"),void d.appendChild(e)):"label"===b.type?(f=c.insertCell(-1),f.setAttribute("colspan","2"),f.addClassName("label-row"),b.url?(h=document.createElement("a"),h.setAttribute("href",b.url),h.setAttribute("target","_blank")):h=document.createElement("label"),h.appendChild(document.createTextNode(b.label)),void f.appendChild(h)):(k=this.factory.createInterface(a,b),g=c.insertCell(-1),g.classList.add("label-cell"),h=document.createElement("label"),h.textContent=b.label,g.appendChild(h),null!=b.description&&(l=new StyledElements.Tooltip({content:b.description,placement:["right","bottom","top","left"]}),l.bind(h)),b.required&&!this.readOnly&&(i=document.createElement("span"),i.appendChild(document.createTextNode("*")),i.className="required_mark",g.appendChild(i)),j=document.createElement("td"),c.appendChild(j),k.assignDefaultButton(this.acceptButton),k.insertInto(j),(this.readOnly||k._readOnly)&&k.setDisabled(!0),this.fieldInterfaces[a]=k,void(this.fields[a]=b))},j=function(a){var b,c;if(this.msgElement.innerHTML="",a.length>0){for(b=0;b<a.length;b+=1)c=document.createElement("p"),c.textContent=a[b],this.msgElement.appendChild(c);this.msgElement.style.display=""}else this.msgElement.style.display="none"};StyledElements.Form=c}(StyledElements,StyledElements.Utils),function(a){"use strict";var b,c,d,e,f;b=new StyledElements.GUIBuilder,c=function(a){this.autoHide&&1===this.source.totalPages?this.wrapperElement.style.display="none":this.wrapperElement.style.display="",this.totalPagesLabel.textContent=this.source.totalPages,this.currentPageLabel.textContent=this.source.currentPage,this.totalCountLabel.textContent=this.source.totalCount,d.call(this)},d=function(){this.source.currentPage<=1?(this.prevBtn.disable(),this.firstBtn.disable()):(this.prevBtn.enable(),this.firstBtn.enable()),this.source.currentPage>=this.source.totalPages?(this.nextBtn.disable(),this.lastBtn.disable()):(this.nextBtn.enable(),this.lastBtn.enable())},e=function(a){var c={firstBtn:this.firstBtn,prevBtn:this.prevBtn,nextBtn:this.nextBtn,lastBtn:this.lastBtn,currentPage:this.currentPageLabel,totalPages:this.totalPagesLabel,totalCount:this.totalCountLabel},d=b.parse(a,c);this.wrapperContainer.appendChild(d)},f=function(f,g){var h={layout:a.gettext(b.DEFAULT_OPENING+'<div class="se-input-group"><t:firstBtn/><t:prevBtn/><div class="se-box">Page: <t:currentPage/>/<t:totalPages/></div><t:nextBtn/><t:lastBtn/></div>'+b.DEFAULT_CLOSING),autoHide:!1};g=a.merge(h,g),this.autoHide=g.autoHide,StyledElements.StyledElement.call(this,[]),this.source=f,this.wrapperContainer=new StyledElements.Container({class:"pagination"}),this.wrapperElement=this.wrapperContainer.wrapperElement,this.firstBtn=new StyledElements.Button({iconClass:"icon-first-page"}),this.firstBtn.addEventListener("click",f.goToFirst.bind(f)),this.prevBtn=new StyledElements.Button({iconClass:"icon-prev-page"}),this.prevBtn.addEventListener("click",f.goToPrevious.bind(f)),this.nextBtn=new StyledElements.Button({iconClass:"icon-next-page"}),this.nextBtn.addEventListener("click",f.goToNext.bind(f)),this.lastBtn=new StyledElements.Button({iconClass:"icon-last-page"}),this.lastBtn.addEventListener("click",f.goToLast.bind(f)),this.currentPageLabel=document.createElement("span"),this.currentPageLabel.classList.add("current-page"),this.totalPagesLabel=document.createElement("span"),this.totalPagesLabel.classList.add("total-pages"),this.totalCountLabel=document.createElement("span"),this.totalCountLabel.classList.add("total-count"),e.call(this,g.layout),this.currentPageLabel.textContent=this.currentPage+1,this.totalPagesLabel.textContent=this.totalPages,d.call(this),this.source.addEventListener("requestEnd",c.bind(this))},a.inherit(f,StyledElements.StyledElement),f.prototype.changeLayout=function(a){e.call(this,a)},StyledElements.PaginationInterface=f}(StyledElements.Utils),function(a){"use strict";var b=new StyledElements.GUIBuilder,c=function(a){0===a.button&&setTimeout(this.hide.bind(this),0)},d=function(a,b){switch(this.element.classList.remove("top","right","bottom","left"),b){case"top":this.element.classList.add("top"),this.element.style.left=a.left+(a.width-this.element.offsetWidth)/2+"px",this.element.style.top=a.top-this.element.offsetHeight+"px";break;case"right":this.element.classList.add("right"),this.element.style.left=a.right+"px",this.element.style.top=a.top+(a.height-this.element.offsetHeight)/2+"px";break;case"bottom":this.element.classList.add("bottom"),this.element.style.left=a.left+(a.width-this.element.offsetWidth)/2+"px",this.element.style.top=a.bottom+"px";break;case"left":this.element.classList.add("left"),this.element.style.left=a.left-this.element.offsetWidth+"px",this.element.style.top=a.top+(a.height-this.element.offsetHeight)/2+"px"}},e=function(){var a=this.element.parentElement.getBoundingClientRect(),b=this.element.getBoundingClientRect(),c=b.width-Math.max(b.right-a.right,0)-Math.max(a.left-b.left,0),d=b.height-Math.max(b.bottom-a.bottom,0)-Math.max(a.top-b.top,0);return b.width*b.height-c*d},f=function(a,b,c){var e=Math.min.apply(Math,b),f=b.indexOf(e),g=c[f];d.call(this,a,g);var h=this.element.parentElement.getBoundingClientRect(),i=this.element.getBoundingClientRect();i.bottom>h.bottom&&(this.element.style.top="",this.element.style.bottom="10px",i=this.element.getBoundingClientRect()),i.top<h.top&&(this.element.style.top="10px")},g=function(a,b){var c=0,g=[];do{d.call(this,a,b[c]),g.push(e.call(this)),c+=1}while(g[c-1]>0&&c<b.length);g[c-1]>0&&f.call(this,a,g,b)},h=function(c){if("Wirecloud"in window&&Wirecloud.UserInterfaceManager._registerPopup(this),this.visible)return this.element.classList.add("in"),void this.repaint();"getBoundingClientRect"in c&&(c=c.getBoundingClientRect()),this.element=b.parse('<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml"><div class="popover fade"><div class="arrow"/><h3 class="popover-title"><t:title/></h3><div class="popover-content"><t:content/></div></div></s:styledgui>',{title:this.options.title,content:this.options.content}).elements[0],this.element.addEventListener("transitionend",j.bind(this));var d=a.getFullscreenElement()||document.body;return d.appendChild(this.element),d.addEventListener("click",this._disableCallback,!0),g.call(this,c,this.options.placement),this.element.classList.add("in"),this.dispatchEvent("show"),this},i=function(b){var d={content:"",title:"",class:"",html:!1,placement:["right","bottom","left","top"]};Object.defineProperty(this,"options",{value:a.merge(d,b)}),StyledElements.StyledElement.call(this,[]),Object.defineProperties(this,{element:{value:null,writable:!0},visible:{get:function(){return null!=this.element}},_disableCallback:{value:c.bind(this),enumerable:!1}})};a.inherit(i,StyledElements.StyledElement),i.prototype.bind=function(a,b){switch(b){case"click":a.addEventListener("click",this.toggle.bind(this),!0);break;case"hover":a.addEventListener("focus",this.show.bind(this,a),!1),a.addEventListener("blur",this.hide.bind(this),!1),a.addEventListener("mouseenter",this.show.bind(this,a),!0),a.addEventListener("mouseleave",this.hide.bind(this),!0),a.addEventListener("click",this.show.bind(this,a),!1);break;default:throw new TypeError("Invalid mode: "+b)}},i.prototype.toggle=function(a){return this.visible?this.hide():h.call(this,a)},i.prototype.show=function(a){return h.call(this,a)};var j=function(){null==this.element||this.element.classList.contains("in")||(this.element.remove(),this.element=null,"Wirecloud"in window&&Wirecloud.UserInterfaceManager._unregisterPopup(this),document.removeEventListener("click",this._disableCallback,!0),this.dispatchEvent("hide"))};i.prototype.hide=function(){var a;return this.visible?(a=!this.element.classList.contains("in")||"0"===getComputedStyle(this.element).getPropertyValue("opacity"),this.element.classList.remove("in"),a&&j.call(this),this):this},StyledElements.Popover=i}(StyledElements.Utils);